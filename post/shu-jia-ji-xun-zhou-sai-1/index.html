
<!DOCTYPE HTML>
<html class="no-js" >
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="renderer" content="webkit">
<meta name="HandheldFriendly" content="true">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no">
<meta http-equiv="x-dns-prefetch-control" content="on">
<title>暑假集训——周赛1 | Guapi</title>

<!-- APlayer Start -->
<link rel="stylesheet" type="text/css" href="https://www.akwing.cn/styles/main.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<script>var APlayers = [];var APlayerOptions = [];</script>
<!-- APlayer End -->
	<script type="text/javascript">
    window['LocalConst'] = {
        THEME_VERSION: "1.7.10.DEV4(190612A)",
        BASE_SCRIPT_URL: "https://cdn.fyun.org/usr/themes/Mirages/",
        DEV_MODE: false,
        IS_MOBILE: false,
        IS_PHONE: false,
        IS_TABLET: false,
        HAS_LOGIN: false,
        IS_HTTPS: true,
        ENABLE_PJAX: false,
        ENABLE_WEBP: true,
        SHOW_TOC: false,
        ENABLE_IMAGE_SIZE_OPTIMIZE: true,
        THEME_COLOR: '#1abc9c',
        DISQUS_SHORT_NAME: '',
        COMMENT_SYSTEM: 0,
        OWO_API: 'https://cdn.fyun.org/usr/themes/Mirages/js/1.7.10dev4/OwO.json',
        COMMENT_SYSTEM_DISQUS: 1,
        COMMENT_SYSTEM_DUOSHUO: 2,
        COMMENT_SYSTEM_EMBED: 0,
        PJAX_LOAD_STYLE: 0,
        PJAX_LOAD_STYLE_SIMPLE: 0,
        PJAX_LOAD_STYLE_CIRCLE: 1,
        AUTO_NIGHT_SHIFT: true,
        USE_MIRAGES_DARK: false,
        PREFERS_DARK_MODE: false,
        LIGHT_THEME_CLASS: "theme-white",
        TOC_AT_LEFT: false,
        SERIF_LOAD_NOTICE: '加载 Serif 字体可能需要 10 秒钟左右，请耐心等待',
        ROOT_FONT_SIZE: '100',
        BIAOQING_PAOPAO_PATH: '',
        BIAOQING_ARU_PATH: '',
        CDN_TYPE_OTHERS: -1,
        CDN_TYPE_QINIU: 1,
        CDN_TYPE_UPYUN: 2,
        CDN_TYPE_LOCAL: 3,
        CDN_TYPE_ALIYUN_OSS: 4,
        CDN_TYPE_QCLOUD_CI: 5,
        KEY_CDN_TYPE: '',
        UPYUN_SPLIT_TAG: '!',
        COMMENTS_ORDER: 'ASC',
        ENABLE_FLOW_CHART: false,
        ENABLE_MERMAID: false,
        HIDE_CODE_LINE_NUMBER: false,
        TRIM_LAST_LINE_BREAK_IN_CODE_BLOCK: true    };
    var Mlog = function (message) {
        if (LocalConst.DEV_MODE) {
            console.log(message);
        }
    };
                    LocalConst.BIAOQING_PAOPAO_PATH = 'https://cdn.fyun.org/usr/plugins/Mirages/biaoqing/paopao/';
        LocalConst.BIAOQING_ARU_PATH = 'https://cdn.fyun.org/usr/plugins/Mirages/biaoqing/aru/';
        var BIAOQING_PAOPAO_PATH = LocalConst.BIAOQING_PAOPAO_PATH;
        var BIAOQING_ARU_PATH = LocalConst.BIAOQING_ARU_PATH;
                LocalConst.KEY_CDN_TYPE = 'mirages-cdn-type';
        LocalConst.UPYUN_SPLIT_TAG = '!';
    </script>
<style type="text/css">
        /* Lora */
    @font-face {
        font-family: 'Lora';
        font-style: normal;
        font-weight: 400;
        font-display: fallback;
        src:
                local('Lora Regular'),
                local('Lora-Regular'),
                url(https://cdn.fyun.org/usr/themes/Mirages/fonts/Lora/400.woff2) format('woff2'),
                url(https://cdn.fyun.org/usr/themes/Mirages/fonts/Lora/400.woff) format('woff');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
    @font-face {
        font-family: 'Lora';
        font-style: normal;
        font-weight: 700;
        font-display: fallback;
        src:
                local('Lora Bold'),
                local('Lora-Bold'),
                url(https://cdn.fyun.org/usr/themes/Mirages/fonts/Lora/700.woff2) format('woff2'),
                url(https://cdn.fyun.org/usr/themes/Mirages/fonts/Lora/700.woff) format('woff');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
</style>
<link rel="stylesheet" href="https://www.akwing.cn/styles/main.css">

    <script>
        var hour = new Date().getHours();
        if (hour <= 5 || hour >= 22) {
            LocalConst.USE_MIRAGES_DARK = true;
        }
    </script>

    



<script type="text/javascript">
    var autoHideElements = {};
    var CSS = function (css) {
        var link = document.createElement('link');
        link.setAttribute('rel', 'stylesheet');
        link.href = css;
        document.head.appendChild(link);
    };
    var STYLE = function (style, type) {
        type = type || 'text/css';
        var s = document.createElement('style');
        s.type = type;
        s.textContent = style;
        document.head.appendChild(s);
    };
    var JS = function (js, async) {
        async = async || false;
        var sc = document.createElement('script'), s = document.scripts[0];
        sc.src = js; sc.async = async;
        s.parentNode.insertBefore(sc, s);
    };
    var registAutoHideElement = function (selector) {
        var tmp = autoHideElements[selector];
        if (typeof(tmp) !== 'undefined') {
            return;
        }
        var element = document.querySelector(selector);
        if (element && typeof(Headroom) !== "undefined") {
            var headroom = new Headroom(element, {
                tolerance: 5,
                offset : 5,
                classes: {
                    initial: "show",
                    pinned: "show",
                    unpinned: "hide"
                }
            });
            headroom.init();
            autoHideElements[selector] = headroom;
        }
    };
    var getImageAddon = function (cdnType, width, height) {
        if (!LocalConst.ENABLE_IMAGE_SIZE_OPTIMIZE) {
            return "";
        }
        if (cdnType == LocalConst.CDN_TYPE_LOCAL || cdnType == LocalConst.CDN_TYPE_OTHERS) {
            return "";
        }
        var addon = "?";
        if (cdnType == LocalConst.CDN_TYPE_UPYUN) {
            addon = LocalConst.UPYUN_SPLIT_TAG;
        }
        var ratio = window.devicePixelRatio || 1;
        width = width || window.innerWidth;
        height = height || window.innerHeight;
        width = width || 0;
        height = height || 0;
        if (width == 0 && height == 0) {
            return "";
        }
        var format = "";
        if (LocalConst.ENABLE_WEBP) {
            if (cdnType == LocalConst.CDN_TYPE_ALIYUN_OSS) {
                format = "/format,webp"
            } else {
                format = "/format/webp";
            }
        }
        if (width >= height) {
            if (cdnType == LocalConst.CDN_TYPE_UPYUN) {
                addon += "/fw/" + parseInt(width * ratio) + "/quality/75" + format;
            } else if(cdnType == LocalConst.CDN_TYPE_ALIYUN_OSS) {
                addon += "x-oss-process=image/resize,w_" + parseInt(width * ratio) + "/quality,Q_75" + format;
            } else {
                addon += "imageView2/2/w/" + parseInt(width * ratio) + "/q/75" + format;
            }
        } else {
            if (cdnType == LocalConst.CDN_TYPE_UPYUN) {
                addon += "/fh/" + parseInt(width * ratio) + "/quality/75" + format;
            } else if(cdnType == LocalConst.CDN_TYPE_ALIYUN_OSS) {
                addon += "x-oss-process=image/resize,h_" + parseInt(width * ratio) + "/quality,Q_75" + format;
            } else {
                addon += "imageView2/2/h/" + parseInt(height * ratio) + "/q/75" + format;
            }
        }
        return addon;
    };
    var getBgHeight = function(windowHeight, bannerHeight, mobileBannerHeight){
        windowHeight = windowHeight || 560;
        if (windowHeight > window.screen.availHeight) {
            windowHeight = window.screen.availHeight;
        }
        bannerHeight = bannerHeight.trim();
        mobileBannerHeight = mobileBannerHeight.trim();
        if (window.innerHeight > window.innerWidth) {
            bannerHeight = parseFloat(mobileBannerHeight);
        } else {
            bannerHeight = parseFloat(bannerHeight);
        }
        bannerHeight = Math.round(windowHeight * bannerHeight / 100);
        return bannerHeight;
    };
    var registLoadBanner = function () {
        if (window.asyncBannerLoadNum >= 0) {
            window.asyncBannerLoadNum ++;
            Mlog("Loading Banner..." + window.asyncBannerLoadNum);
        }
    };
    var remove = function (element) {
        if (element) {
            if (typeof element['remove'] === 'function') {
                element.remove();
            } else if (element.parentNode) {
                element.parentNode.removeChild(element);
            }
        }
    };
    var loadBanner = function (img, backgroundImage, backgroundPosition, wrap, cdnType, width, height, blured) {
        var background = wrap.querySelector('.blog-background');
        var container = wrap.querySelector('.lazyload-container');

        if (!background) {
            console.warn("background is null", background);
            return;
        }
        if (!container) {
            console.warn("container is null", container);
            return;
        }

        var imageSrc = backgroundImage + getImageAddon(cdnType, width, height);

        background.classList.add("loading");

        remove(img);
        if (typeof(backgroundPosition) === 'string' && backgroundPosition.length > 0) {
            container.style.backgroundPosition = backgroundPosition;
            background.style.backgroundPosition = backgroundPosition;
        }
        container.style.backgroundImage = 'url(' + img.src + ')';
        container.classList.add('loaded');

        blured = blured || false;
        if (blured) {
            return;
        }

        // load Src background image
        var largeImage = new Image();
        largeImage.src = imageSrc;
        largeImage.onload = function() {
            remove(this);
            background.style.backgroundImage = 'url(' + imageSrc + ')';
            background.classList.remove('loading');
            container.classList.remove('loaded');
            setTimeout(function () {
                remove(container);
                if (window.asyncBannerLoadCompleteNum >= 0) {
                    window.asyncBannerLoadCompleteNum ++;
                    Mlog("Loaded Banner: " + window.asyncBannerLoadCompleteNum);
                    if (window.asyncBannerLoadCompleteNum === window.asyncBannerLoadNum) {
                        window.asyncBannerLoadNum = -1170;
                        window.asyncBannerLoadCompleteNum = -1170;
                        $('body').trigger("ajax-banner:done");
                    }
                }
            }, 1001);
        };
    };
    var loadPrefersDarkModeState = function () {
        var indicator = document.createElement('div');
        indicator.className = 'dark-mode-state-indicator';
        document.body.appendChild(indicator);
        if (parseInt(mGetComputedStyle(indicator, 'z-index'), 10) === 11) {
            LocalConst.PREFERS_DARK_MODE = true;
        }
        remove(indicator);
    };
    var mGetComputedStyle = function (element, style) {
        var value;
        if (window.getComputedStyle) {
            // modern browsers
            value = window.getComputedStyle(element).getPropertyValue(style);
        } else if (element.currentStyle) {
            // ie8-
            value = element.currentStyle[style];
        }
        return value;
    };
</script>
<style type="text/css">
    body, button, input, optgroup, select, textarea {
        font-family: 'Mirages Custom', 'Merriweather', 'Open Sans', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft Yahei', 'WenQuanYi Micro Hei',  'Segoe UI Emoji', 'Segoe UI Symbol', Helvetica, Arial, sans-serif;
    }
    .github-box, .github-box .github-box-title h3 {
        font-family: 'Mirages Custom', 'Merriweather', 'Open Sans', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft Yahei', 'WenQuanYi Micro Hei',  'Segoe UI Emoji', 'Segoe UI Symbol', Helvetica, Arial, sans-serif !important;
    }
    .aplayer {
        font-family: 'Mirages Custom', 'Myriad Pro', 'Myriad Set Pro', 'Open Sans', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft Yahei', 'WenQuanYi Micro Hei',  Helvetica, arial, sans-serif !important;
    }
    /* Serif */
    body.content-lang-en.content-serif .post-content {
        font-family: 'Lora', 'PT Serif', 'Source Serif Pro', Georgia, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft Yahei', 'WenQuanYi Micro Hei',  serif;
    }
    body.content-lang-en.content-serif.serif-fonts .post-content {
        font-family: 'Lora', 'PT Serif', 'Source Serif Pro', 'Noto Serif CJK SC', 'Noto Serif CJK', 'Noto Serif SC', 'Source Han Serif SC', 'Source Han Serif', 'source-han-serif-sc', 'PT Serif', 'SongTi SC', 'MicroSoft Yahei',  serif;
    }
    body.serif-fonts .post-content, body.serif-fonts .blog-title {
        font-family: 'Noto Serif CJK SC', 'Noto Serif CJK', 'Noto Serif SC', 'Source Han Serif SC', 'Source Han Serif', 'source-han-serif-sc', 'PT Serif', 'SongTi SC', 'MicroSoft Yahei',  Georgia, serif;
    }
    .dark-mode-state-indicator {
        position: absolute;
        top: -999em;
        left: -999em;

        z-index: 1;
    }

    @media (prefers-color-scheme: dark) {
        .dark-mode-state-indicator {
            z-index: 11;
        }
    }
</style>
<style type="text/css">
    /** 页面样式调整 */
    
    </style>

<script>
    var _czc = _czc || [];
    var _hmt = _hmt || [];
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-142872373-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-142872373-1');
</script>
		
</head>
<body class="theme-white color-default card  desktop windows chrome not-safari use-sidebar">
    <script>
        loadPrefersDarkModeState();
        if (LocalConst.USE_MIRAGES_DARK || (LocalConst.AUTO_NIGHT_SHIFT && LocalConst.PREFERS_DARK_MODE)) {
            var body = document.querySelector("body");
            body.classList.remove('theme-white');
            body.classList.add('theme-dark');
        }
    </script>
<!--[if lt IE 9]>
<div class="browse-happy" role="dialog">当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.</div>
<![endif]-->
<div class="sp-progress"></div>
<div id="wrap">
    <span id="backtop" class="waves-effect waves-button"><i class="fa fa-angle-up"></i></span>
      <header>
    <a id="toggle-nav" class="btn btn-primary" href="javascript:void(0);"><span>MENU</span></a>
<nav id="site-navigation" class="sidebar no-user-select" role="navigation">
    <div id="nav">
        <div class="author navbar-header">
            <a href="https://www.akwing.cn">
                <img src="https://www.akwing.cn/images/avatar.png?v=1561787910908" alt="Avatar" width="100" height="100"/>
            </a>
        </div>
       
		
		
        <ul id="menu-menu-1" class="menu navbar-nav">
			
			
			
			
                        <li class="menu-item"><a href="/">首页</a></li>
            
			
                        <li class="menu-item"><a href="/archives">归档</a></li>
            
			
                        <li class="menu-item"><a href="/tags">标签</a></li>
            
			
                        <li class="menu-item"><a href="/post/about">关于</a></li>
            
                                  
                    </ul>
		
		
		
		
		
		
    </div>
                <div id="nav-toolbar">
            <div class="side-toolbar">
                <ul class="side-toolbar-list">
                                            <li><a id="side-toolbar-rss" href="https://blog.fyun.org/feed" title="RSS"><i class="fa fa-feed"></i></a></li>
											
                                             
                                                  
                                             
                                                  
                                             
                                                  
                                             
                                                  
                                             
                                                  
											
											<li><a id="side-toolbar-read-settings" href="javascript:void(0);" title="阅读设置"><i class="fa fa-font"></i></a></li>
                                    </ul>
                <div class="read-settings-container animated">
                    <div class="read-settings animated">
                        <div class="font-size-controls animated">
                            <button type="button" class="font-size-control control-btn-smaller waves-effect waves-button" data-mode="smaller">A</button>
                            <button type="button" class="font-size-display" disabled>100%</button>
                            <button type="button" class="font-size-control control-btn-larger waves-effect waves-button" data-mode="larger">A</button>
                        </div>
                        <div class="background-color-controls animated">
                            <ul>
                                <li><a href="javascript:void(0)" title="自动模式" class="background-color-control auto selected" data-mode="auto"><i class="fa fa-adjust"></i></a></li>
                                <li><a href="javascript:void(0)" title="日间模式" class="background-color-control white " data-mode="white"><i class="fa fa-check-circle"></i></a></li>
                                <li><a href="javascript:void(0)" title="日落模式" class="background-color-control sunset " data-mode="sunset"><i class="fa fa-check-circle"></i></a></li>
                                <li><a href="javascript:void(0)" title="夜间模式" class="background-color-control dark " data-mode="dark"><i class="fa fa-check-circle"></i></a></li>
                            </ul>
                        </div>
                        <div class="font-family-controls">
                            <button type="button" class="font-family-control  control-btn-serif" data-mode="serif">Serif</button>
                            <button type="button" class="font-family-control selected control-btn-sans-serif" data-mode="sans-serif">Sans Serif</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>    </header>
    
    <div id="body">
        <style type="text/css">
    /** 页面样式调整 */
                div#comments{
        margin-top: 0;
    }
                        #footer{
        padding: 1.25rem 0;
    }
        
                .inner {
        background-color: rgba(0,0,0,0.25);
    }
        #masthead {
        min-height: 12.5rem;
    }
                </style>
<style type="text/css">
    </style>        <script type="text/javascript">
            var wrap = document.querySelector('#wrap');
            wrap.classList.remove('display-menu-tree');
            var body = document.querySelector('body');
            body.classList.remove('display-menu-tree');
            LocalConst.TOC_AT_LEFT = false;
            
                        if (body.classList.contains('no-banner')) {
                body.classList.remove('no-banner');
            }                        if (body.classList.contains('content-lang-en')) {
                body.classList.remove('content-lang-en');
            }                        if (body.classList.contains('content-serif')) {
                body.classList.remove('content-serif');
            }            LocalConst.SHOW_TOC = false;
                    </script>
                                <header id="masthead" class="align-center align-middle " style="
            height:
        65;">
            <div class="blog-background"></div>
                        <div class="lazyload-container"></div>
            <script type="text/javascript">
            var blurBanner = false;                if (!blurBanner) registLoadBanner();
            </script>
									
            <img id="lazyload-img" alt="page banner image" src="https://ncdn.camarts.cn/01483d17.jpg?imageView2/2/w/64/q/75" style="display: none" onload="javascript:loadBanner(this, 'https://ncdn.camarts.cn/01483d17.jpg', '', document.querySelector('#masthead'), '1', window.screen.availWidth, window.screen.availHeight, blurBanner)">
									
                        <script type="text/javascript">
                var head = document.querySelector("#masthead");
                var bgHeight = getBgHeight(window.innerHeight, '65', '40');
                head.style.height = bgHeight + "px";
                            </script>
									
									
									
									
									
                        <div class="inner">
                <div class="container">
                    <h1 class="blog-title" style="">
                        暑假集训——周赛1                    </h1>
                    <h2 class="blog-description font-mono" style="">
						
                        2019-06-21 • 阅读: <span id="busuanzi_value_page_pv"></span> • 
							
							<a href="https://www.akwing.cn/tag/LsciNYV-v">图论—最短路</a>
								 
							<a href="https://www.akwing.cn/tag/BwZk5Zyfl">图论—最小生成树</a>
								 
							<a href="https://www.akwing.cn/tag/w2Kxoedb6">暑假集训</a>
								 									  
																	  
																	  • <a href="javascript:void(0)" id="page-read-setting-toggle">阅读设置</a>                    </h2>
                </div>

            </div>
                    </header>
                    <div class="container">
            <div class="row">



<div id="post" role="main">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
        <div class="display-none" itemscope itemprop="author" itemtype="http://schema.org/Person">
            
        </div>
        <div class="display-none" itemscope itemprop="publisher" itemtype="http://schema.org/Organization">
            
            
                <meta itemprop="url" content="https://secure.gravatar.com/avatar/e9ebe6ce987b5a6eded073a87771a1bb?s=50&amp;r=PG&amp;d=">
            </div>
        </div>
        
                <div class="post-content" itemprop="articleBody">
                        <p><h2 id="最短路最小生成树">最短路/最小生成树</h2>
<!-- more -->
<blockquote>
<p><strong>C - Borg Maze <a href="http://poj.org/problem?id=3026">POJ - 3026</a></strong></p>
</blockquote>
<p>BFS+最小生成树</p>
<p>比赛的时候想到了用 bfs求出每个点之间的最短距离，然后跑一遍MST。</p>
<p>可是想想复杂度高达 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>2</mn></msup><msup><mi>m</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^2m^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ,然后放弃了。赛后看题解，确实是这种做法，比赛的时候还是要大胆一些</p>
<pre><code>    #include&lt;iostream&gt;
    #include&lt;cstdio&gt;
    #include&lt;algorithm&gt;
    #include&lt;string&gt;
    #include&lt;cstring&gt;
    #include&lt;cmath&gt;
    #include&lt;queue&gt;
    #include&lt;map&gt;
    using namespace std;
    const int N = 50 + 10;
    const int inf = 0x3f3f3f3f;
    int n, m;
    int fa[N*N];
    int a[N][N];
    int get(int x)
    {
    	if (x == fa[x])  return x;
    	return fa[x] = get(fa[x]);
    }
    struct E
    {
    	int u, v, w;
    	bool operator&lt;(const E &amp;other){
    		return w &lt; other.w;
    	}
    }edge[N*N*N*N];
    int tot,cas;
    int d[N][N];
    const int dx[4] = { 0, 0, -1, 1 }, dy[4] = { 1, -1, 0, 0 };
    typedef pair&lt;int, int &gt; P;
    void bfs(int x,int y)
    {
    	memset(d, -1, sizeof(d));
    	d[x][y] =0;
    	queue&lt;P&gt; q;
    	q.push(P(x, y));
    	int cnt = 1;
    	while (!q.empty())
    	{
    		P cur = q.front();
    		q.pop();
    		for (int i = 0; i &lt; 4; i++)
    		{
    			int nx = cur.first+ dx[i], ny = cur.second + dy[i];
    			if (nx &gt;= 1 &amp;&amp; nx &lt;= n&amp;&amp;ny &gt;= 1 &amp;&amp; ny &lt;= m&amp;&amp;d[nx][ny] == -1&amp;&amp;a[nx][ny]&gt;=0)
    			{
    				d[nx][ny] = d[cur.first][cur.second] + 1;
    				q.push(P(nx, ny));
    				if (a[nx][ny]&gt;0)
    				{
    					edge[tot].u = a[x][y];
    					edge[tot].v = a[nx][ny];
    					edge[tot].w = d[nx][ny];
    					tot++;
    					cnt++;
    					if (cnt &gt;= cas) return;
    				}
    			}
    		}
    	}
    }
    void kru()
    {
    	sort(edge, edge + tot);
    	for (int i = 1; i &lt;= cas; i++)
    		fa[i] = i;
    	int ans = 0;
    	int k = 0;
    	for (int i = 0; i &lt; tot; i++)
    	{
    		int u = edge[i].u, v = edge[i].v;
    		if (get(u) != get(v))
    		{
    			fa[get(u)] = get(v);
    			ans += edge[i].w;
    		}
    	}
    	cout &lt;&lt; ans &lt;&lt; endl;
    
    }
    int main()
    {
    	int t;
    	cin &gt;&gt; t;
    	while (t--)
    	{
    		tot = 0;
    		cas = 0;
    		cin &gt;&gt; m &gt;&gt; n;
    		char s[N];
    		gets(s);
    		for (int i = 1; i &lt;= n; i++)
    		{
    			for (int j = 1; j&lt;= m; j++)
    			{
    				char c = getchar();
    				if (c == ' ') a[i][j] = 0;
    				else if (c == '#') a[i][j] = -1;
    				else a[i][j] = ++cas;
    			}
    			getchar();
    		}
    		for (int i = 1; i &lt;= n; i++)
    		{
    			for (int j = 1; j &lt;= m; j++)
    			{
    				if (a[i][j] &gt; 0)
    					bfs(i, j);
    			}
    		}
    		kru();
    	}
    	return 0;
    }
</code></pre>
<p>[========]</p>
<blockquote>
<p><strong>D - 0 or 1   <a href="http://acm.hdu.edu.cn/showproblem.php?pid=4370">HDU - 4370</a></strong></p>
</blockquote>
<p>比赛的时候不会，赛后看题解也是挺懵的。
这题把C矩阵看成邻接表，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>  表示 i到j之间的距离，把 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">X_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 看成 i到j之间的关系，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">X_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 为1则表示i和j之间有一条路，并且权值为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>
这样我们求从1到n的最短路就可以得到  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∑</mo><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow><mo>∗</mo><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></mrow><annotation encoding="application/x-tex">\sum C{ij} * X{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span></span> ， 为什么这样是正确的呢？
我们把每行每列(邻接表) 看成是图的一个顶点，我们可以观察到第一行的出度就是1，最后一列的入度是1，其他点的出度和入度均为1</p>
<ul>
<li>表示点 1 的出度为 1</li>
<li>表示点 n 的入度为 1</li>
<li>除了点 1 和点 n 外的其他点出入度相等</li>
</ul>
<p>可以画一下，发现从一个点u到另一个点v就是邻接表 <code>C[u][v]</code> ,这样会使第V列多一个1，然后我们下次再从第V行出发在找下一个点，这样第V行也就多一个1，这样就满足了题目要求的关系。
然后还有一种情况，那就是可以从点 1 出发到达其他点然后又回到点 1 形成一个环，同样也可以从点 n 出发回到点 n。这样也是符合条件的，答案为从 1 出发的最小权值环和从 n 出发的最小权值环之和。
最后比较两种情况的最小值
求环，注意最开始不是将起点 s 入队，而是把与起点相连的点加入队列，将 <code>dis[s]</code> 设为 <code>inf</code> 这样可以求得从 s 出发回到 s 的最小环，具体参考代码。</p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
#include&lt;queue&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
using namespace std;
const int N = 310;
const int inf = 0x3f3f3f3f;
int dis[N];
bool vis[N];
int a[N][N],n;
void spfa(int st)
{
	queue&lt;int&gt; q;
	memset(vis, false, sizeof(vis));
	memset(dis, inf, sizeof(dis));
	for (int i = 1; i &lt;= n; i++)
	{
		if (i == st)
		{
			dis[i] = inf;
		}
		else
		{
			q.push(i);
			vis[1] = true;
			dis[i] = c[st][i];
		}
	}
	while (!q.empty())
	{
		int u = q.front();
		q.pop();
		vis[u] = false;
		for (int v = 1; v &lt;= n; v++)
		{
			if (dis[v] &gt; dis[u] + c[u][v])
			{
				dis[v] = dis[u] +c[u][v];
				if (!vis[v])
				{
					vis[v] = true;
					q.push(v);
				}
			}

		}


	}
}
int main()
{
	while (scanf(&quot;%d&quot;, &amp;n)!=EOF)
	{
		
		for (int i = 1; i &lt;= n; i++)
		{
			for (int j = 1; j &lt;= n; j++)
				scanf(&quot;%d&quot;, &amp;c[i][j]);
		}
		spfa(1);
		int c1 = dis[1], ans = dis[n];
		spfa(n);
		int c2 = dis[n];
		ans = min(ans, c1 + c2);
		cout &lt;&lt; ans &lt;&lt; endl;

	}
	return 0;
}
</code></pre>
<hr>
<blockquote>
<p><strong>E - Extended Traffic <a href="https://vjudge.net/problem/LightOJ-1074">LightOJ - 1074</a></strong></p>
</blockquote>
<p>spfa判负环，把负环上的点标记一下，不要想当然的认为有负环所有点都要被标记，负环只是所有点形成的图的一部分，还有就是不要忘了in[v]++,赛场上这个地方没写超时了，也没来得及发现</p>
<pre><code>#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;ctime&gt;
#include &lt;cmath&gt;
#include &lt;queue&gt;
#include &lt;stack&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;sstream&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
using namespace std;
const int M = 2e5 + 10;
const int N = 2e2 + 10;
const int inf = 0x3f3f3f3f;
struct E{
	int to, next, w;
}edge[M];
int head1[N], tot;
int dis1[N], in[N];
bool vis[N], vis1[N];
int n, m, cas;
int a[N];
void addedge(int from, int to, int w)
{
	edge[++tot].to = to;
	edge[tot].w = w;
	edge[tot].next = head1[from];
	head1[from] = tot;
}
void dfs(int u)
{
	vis1[u] = true;
	for (int i = head1[u]; i != -1; i = edge[i].next)
	{
		if (!vis1[edge[i].to])
			dfs(edge[i].to);
	}
}
bool spfa1()
{
	int h = 0, t = 0;
	queue&lt;int&gt; q;
	memset(dis1, inf, sizeof(dis1));
	memset(vis, false, sizeof(vis));
	memset(vis1, false, sizeof(vis1));
	memset(in, 0, sizeof(in));
	dis1[1] = 0;
	q.push(1);
	in[1]++;
	vis[1] = true;
	while (!q.empty())
	{
		int u = q.front();
		q.pop();
		vis[u] = false;
		if (vis1[u]) continue;
		for (int i = head1[u]; i != -1; i = edge[i].next)
		{
			int v = edge[i].to;
			
			int w = edge[i].w;
			if (dis1[v]&gt; dis1[u] + w)
			{
				dis1[v] = dis1[u] + w;
				if (!vis[v])
				{
					vis[v] = true;
					q.push(v);
					in[v]++;
					if (in[v] &gt; n) vis1[v]=true;
				}
			}
		}
	}
	return true;
}

int main()
{
	int t;
	cin &gt;&gt; t;
	while (t--)
	{
		tot = 0;
		scanf(&quot;%d&quot;, &amp;n);
		for (int i = 1; i &lt;= n; i++)
		{
			scanf(&quot;%d&quot;, &amp;a[i]);
			head1[i] = -1;
		}
		cin &gt;&gt; m;
		while (m--)
		{
			int u, v;
			scanf(&quot;%d%d&quot;, &amp;u, &amp;v);
			int w = (a[v] - a[u])*(a[v] - a[u])*(a[v] - a[u]);
			addedge(u, v, w);
		}
		bool f=spfa1();
		printf(&quot;Case %d:\n&quot;, ++cas);
		int q;
		scanf(&quot;%d&quot;, &amp;q);
		while (q--)
		{
			int vv;
			scanf(&quot;%d&quot;, &amp;vv);
			if (vis1[vv] || dis1[vv] == inf || dis1[vv] &lt; 3)
			{
				puts(&quot;?&quot;);
			}
			else
			{
				printf(&quot;%d\n&quot;, dis1[vv]);
			}


		}
	}


	return 0;
}
</code></pre>
<hr>
<blockquote>
<p><strong>F - The Unique MST <a href="http://poj.org/problem?id=1679">POJ - 1679</a></strong></p>
</blockquote>
<p>这题判断最小生成树是否唯一，用kruskal 加边的时候如果两个顶点在一个集合中了，判断已加入的顶点集合中是否存在和当前边权值相同的边，有就是不唯一。可以把加入集合中的点建一颗树，然后搜索进行判断。</p>
<pre><code>#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
#include&lt;string&gt;
#include&lt;cstring&gt;
#include&lt;cmath&gt;
#include&lt;queue&gt;
#include&lt;map&gt;
using namespace std;
const int N = 1e3 + 10;
const int inf = 0x3f3f3f3f;
int n, m;
int fa[N];
int get(int x)
{
	if (x == fa[x])  return x;
	return fa[x] = get(fa[x]);
}
struct E
{
	int u, v, w;
	bool operator&lt;(const E &amp;other){
		return w &lt; other.w;
	}
}edge[N*N];
int tot;
int a[N];
typedef pair&lt;int, int&gt; P;
vector&lt;P&gt; g[N];
bool dfs(int v, int u,int pre, int c,bool f)
{
	for (int i = 0; i &lt; g[v].size(); i++)
	{
		if (g[v][i].first == pre) continue;
		if (g[v][i].second == c)  f = true;
		if (f&amp;&amp;g[v][i].first == u) return true;
		if	(dfs(g[v][i].first, u, v, c, f)) return true;
	}
	return false;
}
int main()
{
	int t;
	cin &gt;&gt; t;
	while (t--)
	{
		cin &gt;&gt; n;
		for (int i = 1; i &lt;= n; i++)
			g[i].clear();
		cin &gt;&gt; m;
		tot = 0;
		bool f = true;
		while (m--)
		{
			int i, j, w;
			cin &gt;&gt; i &gt;&gt; j &gt;&gt; w;
			edge[tot].w = w;
			edge[tot].u = i;
			edge[tot].v = j;
			tot++;
		}
		sort(edge, edge + tot);
		for (int i = 1; i &lt;= n; i++)
			fa[i] = i;
		int ans = 0;
		int k = 0;
		for (int i = 0; i &lt; tot; i++)
		{
			if (k &gt;= n - 1) break;
			int u = edge[i].u, v = edge[i].v;
			if (get(u) != get(v))
			{
				g[u].push_back(P(v, edge[i].w));
				g[v].push_back(P(u, edge[i].w));
				fa[get(u)] = get(v);
				ans += edge[i].w;
			}
			else
			{
				
				if (dfs(u, v, -1, edge[i].w, false)) {
					f = false;
					break;
				}
				
			}
		}
		if (f)
			printf(&quot;%d\n&quot;, ans);
		else
			printf(&quot;Not Unique!\n&quot;);
	}
	return 0;
}
</code></pre>
<blockquote>
<p>总结:比赛的时候一定要细心，有思路的时候要尝试去实现它！！！多刷题。</p>
</blockquote>
  </p>                    </div>
        <div class="tags">
			<div itemprop="keywords" class="keywords atudds">
				
				<a href="https://www.akwing.cn/tag/LsciNYV-v">图论—最短路</a> 
				 
				<a href="https://www.akwing.cn/tag/BwZk5Zyfl">图论—最小生成树</a> 
				 
				<a href="https://www.akwing.cn/tag/w2Kxoedb6">暑假集训</a> 
				 												
																
																</div>
                    </div>
                <div class="post-buttons">
            <a id="toggle-archives" class="btn btn-grey" href="https://www.akwing.cn/archives/">返回文章列表</a>
                       <a id="toggle-post-qr-code" class="btn btn-grey">文章二维码</a>
                                    <a id="toggle-reward-qr-code" class="btn btn-grey">打赏</a>
                    </div>
            </article>
</div>
</div>
</div>
<div id="qr-box">
    <div class="post-qr-code-box">
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=https://www.akwing.cn/post/shu-jia-ji-xun-zhou-sai-1" width="250" height="250" alt="本页链接的二维码"/>
    </div>
    <div class="reward-qr-code-box">
		
        <img src="https://s2.ax1x.com/2019/06/28/ZMreOO.jpg" height="250" alt="打赏二维码"/>
			
    </div>
</div>
<div id="body-bottom">
<div class="container">
            <div class="post-near">
            <nav>
				 
                <span class="prev"><a href="https://www.akwing.cn/post/poj-3662-telephone-lines" title=" POJ 3662 Telephone Lines"><span class="post-near-span"><span class="prev-t no-user-select color-main">下一篇: </span><br><span>
															POJ 3662 Telephone Lines</span></span></a></span>
                
            </nav>
        </div>
            
    <div id="comments">
                      
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '5ce5a551fd840268c860',
    clientSecret: '5ead9040f7cc55641e21476762d5830732b68688',
    repo: 'TheGayhub.github.io',
    owner: 'TheGayhub',
    admin: ['TheGayhub'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          
          
        
                    </div>



    </div>
</div>
</div><!-- end #body -->
</div><!-- end #wrap -->
<footer id="footer" role="contentinfo">
    <div class="container">
        <p></p>    </div>
</footer>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
    <script src="https://www.akwing.cn/media/scripts/jquery.min.js" type="text/javascript"></script>
<script src="https://www.akwing.cn/media/scripts/mirages.main.min.js" type="text/javascript"></script>

<!-- APlayer Start -->
<script type="text/javascript" src="https://www.akwing.cn/media/scripts/APlayer.min.js"></script>
<script>
var len = APlayerOptions.length;
for(var i=0;i<len;i++){
    APlayers[i] = new APlayer({
        element: document.getElementById('player' + APlayerOptions[i]['id']),
        narrow: false,
        preload: APlayerOptions[i]['preload'],
        mutex: APlayerOptions[i]['mutex'],
        autoplay: APlayerOptions[i]['autoplay'],
        showlrc: APlayerOptions[i]['showlrc'],
        music: APlayerOptions[i]['music'],
        theme: APlayerOptions[i]['theme']
        });
    APlayers[i].init();
}
</script>
<!-- APlayer End -->

<script type="text/javascript">Page.highlightCodeBlock();</script>


<script type="text/javascript">pangu.spacingElementByClassName('container');</script>
<script type="text/javascript">Waves.init();</script>

<script type="text/javascript">
    (function ($) {
                if (typeof registCommentEvent === 'function') {
            registCommentEvent();
        }
                        Page.setupLazyLoadImage();
                        Page.setupCDNImageOptimize();
                Page.loadDisqus();
        Page.setupContents();
        Page.bindQRCodeBlockEvents();
            })(jQuery);
    </script>
<!--textClick Begin-->

<!--textClick END-->


</body>
</html>
