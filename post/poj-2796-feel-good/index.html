<!DOCTYPE html>
<html>
  <head>
      
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Guapi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="æƒŸä¸–ä¹‹ç¹åå¦‚æ•…,æ–Ÿé…Œå²æœˆå¦‚åˆ"/>
<meta name="keywords" content="æƒŸä¸–ä¹‹ç¹åå¦‚æ•…,æ–Ÿé…Œå²æœˆå¦‚åˆ"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="http://www.akwing.cn/favicon.ico">

<link rel="stylesheet" href="http://www.akwing.cn/styles/main.css">

<!-- Modernizr JS -->
<script src="http://www.akwing.cn/media/scripts/_vendors/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="http://www.akwing.cn/media/scripts/_vendors/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->

    
        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
    

    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/tomorrow-night.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<link crossorigin="anonymous" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" href="https://lib.baomitu.com/font-awesome/5.8.1/css/all.min.css" rel="stylesheet">

  </head>
  <body>
  
<div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="http://www.akwing.cn/media/images/avatar.png" alt="Guapi" class="img-responsive">
        </figure>
        <h3 class="heading">ABOUT ME</h3>
        <h2>Guapi</h2>
        <p>æƒŸä¸–ä¹‹ç¹åå¦‚æ•…,æ–Ÿé…Œå²æœˆå¦‚åˆ</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">
        <div class="fh5co-box">
            <h3 class="heading">æœç´¢</h3>
            <form action="#">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="è¾“å…¥å…³é”®å­—">
                </div>
            </form>
        </div>
        <div class="fh5co-box">
            <h3 class="heading">æ ‡ç­¾</h3>
            <ul>
                
                    <li><a href="http://www.akwing.cn/tag/Ml1rPTXNB">å°ºå–æ³•</a></li>
                
                    <li><a href="http://www.akwing.cn/tag/Codeforce">Codeforce</a></li>
                
                    <li><a href="http://www.akwing.cn/tag/UHaY9iXO5">æœç´¢â€”DFS</a></li>
                
                    <li><a href="http://www.akwing.cn/tag/RoW-UQAZf">æ¨¡æ‹Ÿ</a></li>
                
                    <li><a href="http://www.akwing.cn/tag/SzMzaPGNc">åŸºæœ¬æ•°æ®ç»“æ„â€”å•è°ƒæ ˆ</a></li>
                
                    <li><a href="http://www.akwing.cn/tag/8AwwtVN5L">å¸¸ç”¨æ¨¡æ¿</a></li>
                
                    <li><a href="http://www.akwing.cn/tag/JNU">æ•°æ®ç»“æ„ä½œä¸š</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                         >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                         >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                         >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                         >
                            å…³äº
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="http://www.akwing.cn">Guapi</a>
                </h1>
            </div>
        </div>
    </div>
</header>


<!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
<!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

  <div class="container-fluid">
      <div class="row fh5co-post-entry single-entry">
          <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
              <figure class="animate-box">
                  
                      <img src="http://www.akwing.cn/post-images/poj-2796-feel-good.jpg" alt="POJ 2796 Feel Good" class="img-responsive">
                  
              </figure>
              <span class="fh5co-meta animate-box">
                  
                      <div class="tag-container">
                          
                              <a href="http://www.akwing.cn/tag/SzMzaPGNc" class="tag">åŸºæœ¬æ•°æ®ç»“æ„â€”å•è°ƒæ ˆ, </a>
                          
                      </div>
                  
              </span>
              <h2 class="fh5co-article-title animate-box">POJ 2796 Feel Good</h2>
              <span class="fh5co-meta fh5co-date animate-box">2019-05-04</span>

              <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                  <div class="row">
                      <div class="col-md-12 animate-box post-content">
                          <p> <h1 id="å•è°ƒæ ˆ">å•è°ƒæ ˆ</h1>
<!-- more -->
<p><a href="http://poj.org/problem?id=2796">POJ 2796</a></p>
<p>é¢˜ç›®çš„å¤§è‡´æ„æ€æ˜¯ï¼Œç»™ä½ nä¸ªæ•°ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼æ˜¯è¿™ä¸ªåºåˆ—ä¸­çš„ä¸€æ®µè¿ç»­çš„å­åºåˆ—é‡Œçš„æœ€å°å€¼ä¹˜äºè¿™æ®µè¿ç»­å­åºåˆ—çš„å’Œï¼Œæˆ‘ä»¬è¦ä½¿å¾—æ±‚å¾—çš„è¿™ä¸ªå€¼æœ€å¤§ï¼Œæ¯”å¦‚æ ·ä¾‹ <code>6 3 1 6 4 5 2</code>ï¼Œæˆ‘ä»¬é€‰æ‹©<code>6 4 5</code>è¿™æ®µè¿ç»­çš„å­åºåˆ—ï¼Œå€¼ä¸º<code>4*(6+4+5)=60</code>
é¦–å…ˆå¯¹äºæ¯ä¸ªæ•°<code>a[i]</code>ï¼Œæˆ‘ä»¬æƒ³è®©ä»–æœ€å¤§å¯èƒ½çš„å¾€å·¦å³æ‰©å±•ï¼ŒçŸ¥é“è¿™ä¸ªæ•°å¾€å·¦å’Œå¾€å³æœ€å¤§çš„æ‰©å±•çš„åæ ‡<code>l,r</code>,åˆ©ç”¨å‰ç¼€å’Œæˆ‘ä»¬å°±æ±‚å¾—äº†è¿™ä¸ªå€¼<code>a[i]*(s[r]-s[l-1])</code>ï¼Œæ‰€ä»¥è¿™é¢˜åœ¨äºæˆ‘ä»¬æ€ä¹ˆå»æ±‚ä¸€ä¸ªæ•°å¾€å·¦å³æ‰©å±•çš„æœ€å¤§ä½ç½®.
æˆ‘ä»¬å…ˆä»¥å¾€å³æ‰©å±•ä¸ºä¾‹ï¼Œç”¨ <strong><code>R[i]</code></strong>  è¡¨ç¤º <strong><code>i</code></strong> å¾€å³æ‰©å±•çš„æœ€å¤§ä½ç½®ã€‚æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªå•è°ƒæ ˆï¼Œè¿™ä¸ªå•è°ƒæ ˆæ˜¯å•è°ƒé€’å‡çš„ï¼Œå³æ ˆé¡¶åˆ°æ ˆåº•é€’å‡ï¼Œç”¨æ•°ç»„è¡¨ç¤ºå³æ˜¯ä»å·¦åˆ°å³é€’å¢ã€‚æˆ‘ä»¬æ‰«æè¿™ä¸ªåºåˆ—ã€‚</p>
<ul>
<li>å¦‚æœå½“å‰è¿™ä¸ªæ•°æ¯”æ ˆé¡¶å¤§æˆ–è€…ç­‰äºï¼Œæˆ‘ä»¬ç›´æ¥å…¥æ ˆã€‚</li>
<li>å¦‚æœå½“å‰è¿™ä¸ªæ•°æ¯”æ ˆé¡¶å°ï¼Œæˆ‘ä»¬å°±ä»æ ˆä¸­å¼¹å‡ºæ•°ï¼Œç›´åˆ°è¿™ä¸ªæ•°æ¯”æ ˆé¡¶å¤§ï¼Œé‚£æ€ä¹ˆè®°å½•å¾€å³æ‰©å±•çš„æœ€å¤§ä½ç½®å‘¢ï¼Œæˆ‘ä»¬åœ¨æŠŠæ•°ä»æ ˆä¸­å¼¹å‡ºçš„è¿‡ç¨‹ä¸­ï¼Œå¼¹å‡ºçš„æ•°ä¸€å®šæ¯”å½“å‰è¦å…¥æ ˆçš„æ•°å¤§ï¼Œå› æ­¤ä»–ä¸€å®šä¸æ˜¯æœ€å°çš„æ•°ï¼Œå¯¹åé¢æ²¡æœ‰ä½œç”¨ï¼Œå› æ­¤å¼¹å‡ºçš„æ•°æœ€å¤§æ‰©å±•ä½ç½®å°±æ˜¯å½“å‰è¿™ä¸ªæ•°çš„ä½ç½®iå†å‡å»1,å³<code>i-1</code>ã€‚
æˆ‘ä»¬ç”¨<code>pos</code>æ•°ç»„è®°å½•ä¸€ä¸‹æ ˆä¸­æ•°æ‰€åœ¨çš„ä½ç½®ï¼ŒåŒæ—¶<code>a[n+1]</code>è®¾ä¸º<code>-1</code>ï¼Œä¿è¯æœ€åæ ˆä¸­å…ƒç´ éƒ½å¯ä»¥è¢«å¼¹å‡ºã€‚
å‘å·¦æ‰©å±•ä¹Ÿæ˜¯ä¸€æ ·é“ç†ã€‚</li>
</ul>
<pre><code>#include &lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
using namespace std;
typedef long long ll;
const int N = 1e5 + 10;
int a[N], n, L[N], R[N], s[N], tot, pos[N];
ll sum[N];
pair&lt;int, int&gt; ans;
int main()
{
    cin &gt;&gt; n;
    for (int i = 1; i &lt;= n; i++){
        scanf(&quot;%d&quot;, &amp;a[i]);
        sum[i] = sum[i - 1] + 1LL*a[i];
        L[i] = R[i] = i;
    }
    a[n + 1] = -1;
    for (int i = 1; i &lt;= n+1; i++)
    {
        if (a[i] &gt;= s[tot])
            s[++tot] = a[i],pos[tot]=i;
        else{
            while (tot&amp;&amp;a[i] &lt; s[tot]){
                R[pos[tot]] = i - 1;
                tot--;
            }
            s[++tot] = a[i],pos[tot]=i;
        }
    }
    a[0] = -1,tot=0;
    for (int i = n; i &gt;= 0; i--){
        if (a[i] &gt;= s[tot]){
            s[++tot] = a[i],pos[tot]=i;
        }
        else{
            while (tot&amp;&amp; a[i] &lt; s[tot]){
                L[pos[tot]] = i+1;
                tot--;
            }
            s[++tot] = a[i], pos[tot] = i;
        }
    }
    ll max_val= -1;
    for (int i = 1; i &lt;= n; i++){
        if (a[i]*(sum[R[i]] - sum[L[i] - 1]) &gt; max_val)
        {
            max_val = a[i] * (sum[R[i]] - sum[L[i] - 1]);
            ans.first = L[i];
            ans.second = R[i];
        }
    }
    cout &lt;&lt; max_val &lt;&lt; endl;
    cout &lt;&lt; ans.first &lt;&lt; &quot; &quot; &lt;&lt; ans.second &lt;&lt; endl;
    return 0;
}
</code></pre>
 </p>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              <div class="next-post">
                                  <div class="next">ä¸‹ä¸€ç¯‡</div>
                                  <a href="http://www.akwing.cn/post/MinString">
                                      <h3 class="post-title">
                                          å­—ç¬¦ä¸²æœ€å°è¡¨ç¤ºæ³•
                                      </h3>
                                  </a>
                              </div>
                          
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              
                                  <div id="gitalk-container"></div>
                              

                              
                          
                      </div>
                  </div>
              </div>

          </article>
      </div>
  </div>

    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
</footer>


    
<!-- jQuery -->
<script src="http://www.akwing.cn/media/scripts/_vendors/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="http://www.akwing.cn/media/scripts/_vendors/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="http://www.akwing.cn/media/scripts/_vendors/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="http://www.akwing.cn/media/scripts/_vendors/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="http://www.akwing.cn/media/scripts/_vendors/main.js"></script>
<!-- Md5 Min JS -->
<script src="http://www.akwing.cn/media/scripts/_vendors/md5.min.js"></script>

<script type="application/javascript">
    hljs.initHighlightingOnLoad();
</script>



    
        <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
        <script>

            var gitalk = new Gitalk({
                clientID: '10f790001ada82f18531',
                clientSecret: '28d160d9de074bd1b5839bac5c19dd191cf2c634',
                repo: 'TheGayhub.github.io',
                owner: 'TheGayhub',
                admin: ['TheGayhub'],
                id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                distractionFreeMode: false  // Facebook-like distraction free mode
            })

            gitalk.render('gitalk-container')

        </script>
    

    




  </body>
</html>
