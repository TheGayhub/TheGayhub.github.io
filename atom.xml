<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://www.akwing.cn</id>
    <title>Guapi</title>
    <updated>2019-06-28T07:05:55.364Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://www.akwing.cn"/>
    <link rel="self" href="https://www.akwing.cn/atom.xml"/>
    <subtitle>æƒŸä¸–ä¹‹ç¹åå¦‚æ•…,æ–Ÿé…Œå²æœˆå¦‚åˆ</subtitle>
    <logo>https://www.akwing.cn/images/avatar.png</logo>
    <icon>https://www.akwing.cn/favicon.ico</icon>
    <rights>All rights reserved 2019, Guapi</rights>
    <entry>
        <title type="html"><![CDATA[æš‘å‡åˆ·é¢˜è®°å½•]]></title>
        <id>https://www.akwing.cn/post/shu-jia-shua-ti-ji-lu</id>
        <link href="https://www.akwing.cn/post/shu-jia-shua-ti-ji-lu">
        </link>
        <updated>2019-09-01T11:36:23.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="ä¸»è¦è®°å½•ä¸€ä¸‹æ¯å¤©åˆ·çš„é¢˜ç›®">ä¸»è¦è®°å½•ä¸€ä¸‹æ¯å¤©åˆ·çš„é¢˜ç›®</h1>
]]></summary>
        <content type="html"><![CDATA[<h1 id="ä¸»è¦è®°å½•ä¸€ä¸‹æ¯å¤©åˆ·çš„é¢˜ç›®">ä¸»è¦è®°å½•ä¸€ä¸‹æ¯å¤©åˆ·çš„é¢˜ç›®</h1>
<!-- more -->
<h2 id="624">6.24</h2>
<blockquote>
<p>æ´›è°·P3674 <a href="https://www.luogu.org/problemnew/show/P3674">P3674 å°æ¸…æ–°äººæ¸£çš„æœ¬æ„¿</a>
1æ“ä½œåŒ–ç®€ä»¥åbitsetç»Ÿè®¡ç­”æ¡ˆå·¦ç§»xå¯ä»¥çœ‹æˆå½“å‰æ•°+x , 2æ“ä½œæ³¨æ„è¦å¦åŠ ä¸€ä¸ªbitsetï¼Œè¿™æ˜¯å› ä¸ºå¯èƒ½æœ‰è´Ÿæ•°å­˜ä¸äº†ï¼Œ3æ“ä½œç›´æ¥æšä¸¾å› å­ã€‚</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æš‘å‡é›†è®­â€”â€”å‘¨èµ›2]]></title>
        <id>https://www.akwing.cn/post/shu-jia-ji-xun-zhou-sai-2</id>
        <link href="https://www.akwing.cn/post/shu-jia-ji-xun-zhou-sai-2">
        </link>
        <updated>2019-06-27T04:01:04.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="çº¿æ®µæ ‘æ ‘çŠ¶æ•°ç»„"><s>çº¿æ®µæ ‘</s>/æ ‘çŠ¶æ•°ç»„</h1>
]]></summary>
        <content type="html"><![CDATA[<h1 id="çº¿æ®µæ ‘æ ‘çŠ¶æ•°ç»„"><s>çº¿æ®µæ ‘</s>/æ ‘çŠ¶æ•°ç»„</h1>
<!-- more -->
<p>æ˜¯çš„ï¼Œæ²¡çœ‹è§å‘¨èµ›æœ‰çº¿æ®µæ ‘çš„é¢˜ğŸ˜¤ã€‚</p>
<h3 id="aé¢˜æ ‘çŠ¶æ•°ç»„">Aé¢˜(æ ‘çŠ¶æ•°ç»„)</h3>
<blockquote>
<p><strong><a href="http://poj.org/problem?id=3067">A - Japan POJ - 3067 </a></strong></p>
</blockquote>
<h4 id="é¢˜æ„ç»™å‡ºä¸€äº›çº¿æ®µå¯»æ‰¾äº¤ç‚¹çš„ä¸ªæ•°">é¢˜æ„ï¼šç»™å‡ºä¸€äº›çº¿æ®µï¼Œå¯»æ‰¾äº¤ç‚¹çš„ä¸ªæ•°ã€‚</h4>
<p>åˆšå¼€å§‹çœ‹åˆ°æ•°æ®åªæœ‰1000ï¼Œæƒ³æš´åŠ›æ‰¾äº¤ç‚¹ï¼Œçº¿æ®µ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>,ä¸¤æ¡çº¿æ®µæœ‰äº¤ç‚¹å°±æ˜¯<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;&amp;&#039; at position 12: (x_1 &gt; x_2 &amp;Ì²&amp; y_1 &lt;y_2 ||x_â€¦'>(x_1 &gt; x_2 &amp;&amp; y_1 &lt;y_2 ||x_2&gt;x_1 &amp;&amp; y_2&lt;y_1)</span> ,æš´åŠ›å¯»æ‰¾ç„¶åè¶…æ—¶äº†ã€‚ç”±äºæ˜¯äº¤ç‚¹åªä¸ç‚¹çš„å…³ç³»æ‰€å†³å®šï¼Œæˆ‘ä»¬ä¸å¦¨æŒ‰ç…§<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>ä»å¤§åˆ°å°å¼€å§‹éå†ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ¯”å¦‚è¯´éå†åˆ°äº†å½“å‰çš„ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>,è¿™ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>å¯¹ç­”æ¡ˆçš„è´¡çŒ®æ˜¯å¤šå°‘å‘¢ï¼Ÿ æ˜¾ç„¶å°±æ˜¯å‰é¢çš„å·²ç»éå†è¿‡çš„é‚£äº›çº¿æ®µä¸­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>åæ ‡æ¯”å½“å‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>åæ ‡å°çš„çº¿æ®µçš„æ•°é‡ï¼Œè¿™å°±å¯ä»¥æ ‘çŠ¶æ•°ç»„æ¥æ±‚ä¸ªæ•°ã€‚æŒ‰ç…§éå†çš„é¡ºåºï¼Œä¾æ¬¡æŠŠ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>æ’å…¥æ ‘çŠ¶æ•°ç»„ä¸­ï¼Œç„¶åå¯¹äºå½“å‰éå†çš„ç´¯åŠ è´¡çŒ®å³å¯ã€‚æ³¨æ„ï¼š<strong>è¦ç”¨ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">long long</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span></strong></p>
<p>ä¸»è¦ä»£ç ğŸ‘‡</p>
<pre><code>
bool operator&lt;(const P &amp;o)const
{
	if (x == o.x) return y&gt;o.y;
	return x &gt; o.x;
}
sort(a + 1, a + k + 1);
for (int i = 1; i &lt;= k; i++)
{
	ans += ask(a[i].y - 1);
	add(a[i].y);
}

</code></pre>
<h3 id="bé¢˜æ‰¾è§„å¾‹">Bé¢˜(æ‰¾è§„å¾‹)</h3>
<blockquote>
<p><strong><a href="https://codeforces.com/problemset/problem/792/D">B - Paths in a Complete Binary Tree </a></strong></p>
</blockquote>
<h4 id="é¢˜æ„ç»™å®šèµ·ç‚¹æŒ‰ç…§ç»™å®šçš„å­—ç¬¦ä¸²åœ¨å›¾ä¸Šèµ°æ±‚ç»ˆç‚¹çš„èŠ‚ç‚¹ç¼–å·">é¢˜æ„ï¼šç»™å®šèµ·ç‚¹ï¼ŒæŒ‰ç…§ç»™å®šçš„å­—ç¬¦ä¸²åœ¨å›¾ä¸Šèµ°ï¼Œæ±‚ç»ˆç‚¹çš„èŠ‚ç‚¹ç¼–å·ã€‚</h4>
<p>è¿™é¢˜ä¹‹å‰æœ‰ç‚¹å°è±¡ï¼Œå’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>w</mi><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">lowbit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span></span></span></span>æœ‰å…³ã€‚å‡è®¾å½“å‰èŠ‚ç‚¹ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>ã€‚</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>æ˜¯å¥‡æ•°ï¼Œè¯¥èŠ‚ç‚¹ä¸ºå¶å­èŠ‚ç‚¹.</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>ä¸ºå¶æ•°ï¼Œå·¦å„¿å­å°±æ˜¯ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>âˆ’</mo><mo>(</mo><mi>l</mi><mi>o</mi><mi>w</mi><mi>b</mi><mi>i</mi><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>&gt;</mo><mo>&gt;</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">x-(lowbit(x)&gt;&gt;1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>,å³å„¿å­å°±æ˜¯ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>+</mo><mo>(</mo><mi>l</mi><mi>o</mi><mi>w</mi><mi>b</mi><mi>i</mi><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>&gt;</mo><mo>&gt;</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">x+(lowbit(x)&gt;&gt;1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>.</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>çš„çˆ¶äº²èŠ‚ç‚¹ä¸º <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>+</mo><mi>l</mi><mi>o</mi><mi>w</mi><mi>b</mi><mi>i</mi><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">x+lowbit(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span> æˆ–è€… <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>âˆ’</mo><mi>l</mi><mi>o</mi><mi>w</mi><mi>b</mi><mi>i</mi><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">x-lowbit(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>.</li>
</ul>
<p>å½“æ—¶æˆ‘å°±å¡åœ¨å¦‚ä½•æ±‚çˆ¶äº²èŠ‚ç‚¹ï¼Œå› ä¸ºå·¦å³å„¿å­çš„æ±‚æ³•ä¸ä¸€æ ·ï¼Œæ¯”èµ›çš„æ—¶å€™çœ‹å›¾éšæ„å£èƒ¡äº†ä¸€ç§åˆ¤æ–­æ–¹æ³•ï¼Œäº¤ä¸Šå»WAäº†ã€‚ç¬¬äºŒå¤©è¡¥é¢˜çš„æ—¶å€™å‘ç°ï¼Œåˆ¤æ–­å·¦å„¿å­çš„æ–¹æ³•ï¼šç›´æ¥ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mo>=</mo><mi>x</mi><mo>+</mo><mi>l</mi><mi>o</mi><mi>w</mi><mi>b</mi><mi>i</mi><mi>t</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">v=x+lowbit(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>ï¼Œå†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mo>=</mo><mi>v</mi><mo>âˆ’</mo><mo>(</mo><mi>l</mi><mi>o</mi><mi>w</mi><mi>b</mi><mi>i</mi><mi>t</mi><mo>(</mo><mi>v</mi><mo>)</mo><mo>&gt;</mo><mo>&gt;</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">v=v-(lowbit(v)&gt;&gt;1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>ï¼Œåˆ¤æ–­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span></span>æ˜¯å¦å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>ä¸€æ ·å³å¯ã€‚æ¯”èµ›æ—¶æ²¡èƒ½æƒ³åˆ°ï¼Œç¡®å®æœ‰ç‚¹æ°”äººå•Šã€‚</p>
<h3 id="cé¢˜dpæ ‘çŠ¶æ•°ç»„">Cé¢˜(dp+æ ‘çŠ¶æ•°ç»„)</h3>
<blockquote>
<p><strong><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1523">C - K-inversions</a></strong></p>
</blockquote>
<h4 id="é¢˜æ„ç±»ä¼¼äºé€†åºå¯¹æˆ‘è®¤ä¸ºè¿™ä¸ªå«kåºå¯¹å› ä¸ºåºåˆ—é•¿åº¦è¦æ±‚ä¸ºk">é¢˜æ„ï¼šç±»ä¼¼äºé€†åºå¯¹ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªå«Kåºå¯¹,å› ä¸ºåºåˆ—é•¿åº¦è¦æ±‚ä¸ºKã€‚</h4>
<p>æƒ³ç€ç”¨æ ‘çŠ¶æ•°ç»„æ±‚è§£ï¼Œä¸ä¼šã€‚èµ›åè¡¥é¢˜çš„ã€‚
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><msub><mi>p</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">dp_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>è¡¨ç¤ºæ»¡è¶³ä»¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>ç»“å°¾åºåˆ—é•¿åº¦ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>çš„ä¸ªæ•°ï¼Œæˆ‘ä»¬æœ€ç»ˆéœ€è¦ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>k</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{n}dp[i][k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">]</span></span></span></span></p>
<p>å¦‚æœ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>ä»<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>å˜åŒ–ï¼Œé€’æ¨å¼å°±æ˜¯ :</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>]</mo><mo>=</mo><mo>âˆ‘</mo><mi>d</mi><mi>p</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo><mo separator="true">,</mo><mo>(</mo><mi>k</mi><mo>&lt;</mo><mi>i</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>i</mi></msub><mo>&lt;</mo><msub><mi>a</mi><mi>k</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">dp[i][j]= \sum dp[k][j-1] ,(k&lt;i,a_i&lt;a_k) 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.6000100000000002em;vertical-align:-0.55001em;"></span><span class="mop op-symbol large-op" style="position:relative;top:-0.000004999999999977245em;">âˆ‘</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>æ±‚å’Œçš„è¿‡ç¨‹å¯ä»¥ç”¨æ ‘çŠ¶æ•°ç»„æ¥æ±‚è§£ã€‚ç”±äºå¦‚æœä»å‰å¾€åéå†ï¼Œæˆ‘ä»¬éœ€è¦æ±‚è§£çš„æ˜¯æ»¡è¶³æ¯”å½“å‰a_iå¤§çš„ï¼Œæˆ‘ä»¬ä¸ªå°†æ•°ç»„åè½¬è¿‡æ¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å˜æˆæ±‚è§£æ¯” <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å°çš„äº†ã€‚å…¶å®æ ‘çŠ¶æ•°ç»„ä¹Ÿèƒ½æ±‚è§£å¤§äºæŸä¸€ä¸ªæ•°çš„ä¸ªæ•°ï¼Œå°†æ ‘çŠ¶æ•°ç»„æ›´æ–°å’ŒæŸ¥è¯¢çš„è¿‡ç¨‹ä¸­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>å˜åŒ–åè¿‡æ¥å³å¯ï¼Œä¹Ÿå°±æ˜¯è®¤ä¸ºæ•°ç»„çš„æœ€è¿œçš„ä¸€ç«¯æ˜¯èµ·ç‚¹ã€‚
æˆ‘ä»¬éå†åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ—¶ï¼Œå°†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo>[</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">dp[i][j-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>ä»<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>è¿™ä¸ªä½ç½®æ’å…¥æ ‘çŠ¶æ•°ç»„ä¸­ï¼Œè¿™æ ·åœ¨åé¢æ±‚å’Œçš„æ—¶å€™ï¼Œæ¯”<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¤§çš„æ•°å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ•°ï¼Œæ¯”<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å°çš„æ•°ä¸ä¼šç”¨åˆ°ã€‚æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>Ã—</mo><mi>k</mi><mo>Ã—</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>n</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n \times k \times log_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<pre><code>
#include &lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
using namespace std;
const int N = 2e4 + 10;
const int mod = 1e9;
typedef  long long ll;
#define lowbit(x) (x&amp;(-x))
int c[N][12],n,k,a[N];
int dp[N][12];
void add(int x, int y, int val)
{
	while (x &lt;= n)
	{
		c[x][y] = (c[x][y] + val) % mod;
		x += lowbit(x);
	}
}
int ask(int x, int y)
{
	int res = 0;
	while (x)
	{
		res = (res + c[x][y]) % mod;
		x -= lowbit(x);
	}
	return res;
}
int main()
{
	scanf(&quot;%d%d&quot;, &amp;n, &amp;k);
	for (int i = 1; i &lt;= n; i++)
		scanf(&quot;%d&quot;, &amp;a[i]);
	for (int i = 1; i &lt;= n; i++){
		dp[i][1] = 1;
	}
	for (int i = 1; i &lt;= n / 2; i++)
		swap(a[i], a[n - i+1]);
	for (int j = 2; j &lt;= k; j++)
	{
		for (int i = j-1; i &lt;= n; i++)//iä»1å¼€å§‹ä¹Ÿè¡Œï¼Œi&lt;j-1çš„éƒ¨åˆ†dp[i][j]éƒ½æ˜¯0ï¼Œå¯¹ç­”æ¡ˆæ— å½±å“
		{
			dp[i][j] = ask(a[i] - 1,j);//è¿™é‡Œä¹Ÿå¯ä»¥åªç”¨ä¸€ä¸ª1ç»´æ ‘çŠ¶æ•°ç»„å¾ªç¯åˆ©ç”¨
			add(a[i], j, dp[i][j - 1]);
		}
	}
	int ans = 0;
	for (int i = 1; i &lt;= n; i++)
		ans = (ans + dp[i][k]) % mod;
	cout &lt;&lt; ans &lt;&lt; endl;
	return 0;
}

</code></pre>
<h3 id="dé¢˜è´ªå¿ƒ">Dé¢˜(è´ªå¿ƒ)</h3>
<blockquote>
<p><strong><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1523">D - Make Palindrome </a></strong></p>
</blockquote>
<h4 id="é¢˜æ„æ±‚æœ€å°çš„æ¬¡æ•°å°†å­—ç¬¦ä¸²å˜ä¸ºå›æ–‡ä¸²åœ¨ä¸€æ¬¡æ“ä½œä¸­ä½ å¯ä»¥å˜æ¢ä»»æ„ä¸€ä¸ªå­—ç¬¦-ä½ å¯ä»¥éšæ„ç§»åŠ¨å­—ç¬¦ä¸²çš„ä½ç½®ä¸å¢åŠ æ¬¡æ•°">é¢˜æ„ï¼šæ±‚æœ€å°çš„æ¬¡æ•°å°†å­—ç¬¦ä¸²å˜ä¸ºå›æ–‡ä¸²ï¼Œåœ¨ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¯ä»¥å˜æ¢ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä½ å¯ä»¥éšæ„ç§»åŠ¨å­—ç¬¦ä¸²çš„ä½ç½®ï¼Œä¸å¢åŠ æ¬¡æ•°</h4>
<p>å›æ–‡ä¸²çš„ç‰¹ç‚¹æ˜¯æœ€å¤šæœ‰1ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°ä¸ºå¥‡æ•°ï¼Œå…¶ä»–ä¸ºå‡ä¸ºå¶æ•°ã€‚
æˆ‘ä»¬å¯ä»¥è®°å½•æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åä»å°åˆ°å¤§éå†å­—ç¬¦ï¼Œè‹¥å½“å‰å­—ç¬¦ä¸ªæ•°ä¸ºå¥‡æ•°ï¼Œå“ªä¹ˆæˆ‘ä»¬å¯ä»¥å†å¯»æ‰¾<strong>ä¸€ä¸ª</strong>ä¸ªæ•°ä¹Ÿä¸ºå¥‡æ•°çš„å­—ç¬¦ï¼Œå°†å…¶æ›¿æ¢ä¸ºæˆ‘ä»¬è¿™ä¸ªå­—å…¸åºè¾ƒå°å­ç¬¦ï¼Œè¿™æ ·æˆ‘ä»¬èŠ±è´¹ä¸€æ¬¡å°±å¯ä»¥æ¶ˆå»ä¸¤ä¸ªå¥‡æ•°å­—ç¬¦ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¯´æ˜ä»–å°±æ˜¯ä¸­é—´å­—ç¬¦ã€‚æœ€åæˆ‘ä»¬æŒ‰ç…§å­—å…¸åºä»å°åˆ°å¤§è¾“å‡ºå­—ç¬¦å³å¯ã€‚</p>
<pre><code>
#include &lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
using namespace std;
const int N = 2e5 + 10;
const int mod = 1e9;
typedef  long long ll;
#define lowbit(x) (x&amp;(-x))
int num[30];
int len, tot;
char s[N];
int main()
{
	scanf(&quot;%s&quot;, s);
	len = strlen(s);
	for (int i = 0; i &lt; len; i++)
		num[s[i] - 'a']++;
	int pos = -1, f = 0;
	for (int i = 0; i &lt; 26; i++)
	{
		if (num[i] &amp; 1)
		{
			f = 1;
			for (int j = 25; j&gt;i; j--)
			{
				if (num[j] &amp; 1){
					num[i]++;
					num[j]--;
					f = 0;
					break;
				}
			}
			if (f) pos = i;
		}
	}
	for (int i = 0; i &lt; 26; i++)
	{
		if (!num[i]) continue;
		int t = num[i] / 2;
		while (t--)
			s[tot++] = i + 'a';
	}
	if (pos != -1) s[tot++] = pos + 'a';
	for (int i = 25; i &gt;= 0; i--)
	{
		if (!num[i]) continue;
		int t = num[i] / 2;
		while (t--)
			s[tot++] = i + 'a';
	}
	printf(&quot;%s\n&quot;, s);
	return 0;
}

</code></pre>
<h3 id="fé¢˜å•è°ƒæ ˆstè¡¨">Fé¢˜(å•è°ƒæ ˆ/STè¡¨)</h3>
<blockquote>
<p><strong><a href="http://acm.timus.ru/problem.aspx?space=1&amp;num=1523">F - A Magic Lamp HDU - 3183</a></strong></p>
</blockquote>
<h3 id="é¢˜æ„ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤mä¸ªå­—ç¬¦ä½¿å¾—å­—å…¸åºæœ€å°ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹ä½ç½®">é¢˜æ„ï¼šä»å­—ç¬¦ä¸²ä¸­åˆ é™¤mä¸ªå­—ç¬¦ï¼Œä½¿å¾—å­—å…¸åºæœ€å°ï¼Œä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹ä½ç½®ã€‚</h3>
<h4 id="å•è°ƒæ ˆ">å•è°ƒæ ˆï¼š</h4>
<p>ç»´æŠ¤ä¸€ä¸ªä»æ ˆé¡¶åˆ°æ ˆåº•é€’å‡çš„å­—ç¬¦ä¸²ï¼Œå½“å‰å­—ç¬¦æ¯”æ ˆé¡¶å¤§æˆ–ç›¸ç­‰ï¼Œç›´æ¥æ’å…¥ï¼Œå¦åˆ™å¼¹å‡ºï¼Œç›´åˆ°å¤§äºæ ˆé¡¶æˆ–æ ˆç©ºã€‚åˆ é™¤çš„ä¸ªæ•°è¾¾åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>å°±è¦åŠæ—¶åœæ­¢ï¼Œæœ€åè¾“å‡ºæ ˆä¸­å‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n-m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>ä¸ªå­—ç¬¦å³å¯ã€‚å­—ç¬¦ç›¸ç­‰ä¸ºä»€ä¹ˆç›´æ¥æ’å…¥ï¼Ÿ å› ä¸ºè¿™ä¸ªå­—ç¬¦ä¿ç•™åœ¨æ ˆä¸­æ˜¯æœ€ä¼˜çš„ã€‚å¦‚æœåé¢æœ‰æ¯”å®ƒå°çš„å­—ç¬¦ï¼Œé‚£è¿™ä¸ªå°±å¯èƒ½è¢«åˆ é™¤ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£å°±æ˜¯åé¢å­—ç¬¦æ¯”å®ƒå¤§ï¼Œéƒ½ä¸ä¼šå½±å“ç­”æ¡ˆã€‚</p>
<h4 id="stè¡¨">STè¡¨ï¼š</h4>
<p>ä¸æ–­çš„ä»åŒºé—´ä¸­å¯»æ‰¾æœ€å°çš„å­—ç¬¦ï¼Œç„¶åæš´åŠ›æŸ¥æ‰¾ä¸‹æ ‡ï¼Œå†æ›´æ–°åŒºé—´ã€‚ç¬¬ä¸€æ¬¡æŸ¥æ‰¾çš„åŒºé—´ä¸º <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mn>1</mn><mo separator="true">,</mo><mi>m</mi><mo>+</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">[1,m+1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>,è¿™ä¸ªåŒºé—´çš„é€‰å–ï¼Œæ¯æ¬¡éƒ½è¦ä¿è¯æœ€ç»ˆç•™æœ‰è¶³å¤Ÿçš„å­—ç¬¦æ¥ä½¿å¾—æˆ‘ä»¬çš„æœ€ç»ˆå­—ç¬¦ä¸ªæ•°ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n-m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>ã€‚å‡è®¾å½“å‰æŸ¥æ‰¾ç¬¬<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>ä¸ªå­—ç¬¦ï¼Œä¸Šæ¬¡æŸ¥æ‰¾çš„ä½ç½®ä¸‹æ ‡ä¸ºidx,é‚£ä¹ˆè¿™æ¬¡æŸ¥æ‰¾çš„åŒºé—´å°±æ˜¯ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mi>i</mi><mi>d</mi><mi>x</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>m</mi><mo>+</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[idx+1,m+i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">i</span><span class="mclose">]</span></span></span></span> .STè¡¨æ±‚è§£å³å¯</p>
<pre><code>
#include &lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
using namespace std;
const int N = 2e5 + 10;
const int mod = 1e9;
typedef  long long ll;
#define lowbit(x) (x&amp;(-x))
int num[30];
int len, tot;
char s[N];
int main()
{
	scanf(&quot;%s&quot;, s);
	len = strlen(s);
	for (int i = 0; i &lt; len; i++)
		num[s[i] - 'a']++;
	int pos = -1, f = 0;
	for (int i = 0; i &lt; 26; i++)
	{
		if (num[i] &amp; 1)
		{
			f = 1;
			for (int j = 25; j&gt;i; j--)
			{
				if (num[j] &amp; 1){
					num[i]++;
					num[j]--;
					f = 0;
					break;
				}
			}
			if (f) pos = i;
		}
	}
	for (int i = 0; i &lt; 26; i++)
	{
		if (!num[i]) continue;
		int t = num[i] / 2;
		while (t--)
			s[tot++] = i + 'a';
	}
	if (pos != -1) s[tot++] = pos + 'a';
	for (int i = 25; i &gt;= 0; i--)
	{
		if (!num[i]) continue;
		int t = num[i] / 2;
		while (t--)
			s[tot++] = i + 'a';
	}
	printf(&quot;%s\n&quot;, s);
	return 0;
}

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[çº¿æ®µæ ‘åŒºé—´ä¿®æ”¹ä¼˜å…ˆçº§]]></title>
        <id>https://www.akwing.cn/post/xian-duan-shu-qu-jian-xiu-gai-you-xian-ji</id>
        <link href="https://www.akwing.cn/post/xian-duan-shu-qu-jian-xiu-gai-you-xian-ji">
        </link>
        <updated>2019-06-26T09:43:10.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="çº¿æ®µæ ‘ä¸€ä¸ªåŒºé—´è¿›è¡Œå¤šä¸ªæ“ä½œæ—¶å¤„ç†çš„ä¼˜å…ˆçº§">çº¿æ®µæ ‘ä¸€ä¸ªåŒºé—´è¿›è¡Œå¤šä¸ªæ“ä½œæ—¶å¤„ç†çš„ä¼˜å…ˆçº§</h2>
]]></summary>
        <content type="html"><![CDATA[<h2 id="çº¿æ®µæ ‘ä¸€ä¸ªåŒºé—´è¿›è¡Œå¤šä¸ªæ“ä½œæ—¶å¤„ç†çš„ä¼˜å…ˆçº§">çº¿æ®µæ ‘ä¸€ä¸ªåŒºé—´è¿›è¡Œå¤šä¸ªæ“ä½œæ—¶å¤„ç†çš„ä¼˜å…ˆçº§</h2>
<!-- more -->
<blockquote>
<p>** æ‡’æƒ°æ ‡è®°ï¼šå½“å‰åŒºé—´å·²ç»ä¿®æ”¹ï¼Œä½†å„¿å­èŠ‚ç‚¹åŒºé—´æœªä¿®æ”¹ï¼Œä¸èƒ½è¯¯è®¤ä¸ºå½“å‰åŒºé—´ä¹Ÿæœªä¿®æ”¹ã€‚**</p>
</blockquote>
<h3 id="ä¸€-åŒºé—´èµ‹å€¼å’ŒåŒºé—´åŠ å€¼">ä¸€ ã€ åŒºé—´<strong>èµ‹å€¼</strong>å’ŒåŒºé—´<strong>åŠ </strong>å€¼</h3>
<p>è¿™ä¸ªå¾ˆæ˜æ˜¾å°±æ˜¯èµ‹å€¼çš„ä¼˜å…ˆçº§é«˜ï¼Œä¸‹æ”¾æ‡’æƒ°æ ‡è®°æ—¶ï¼Œæˆ‘ä»¬åšå‡ºå¦‚ä¸‹è®¨è®ºã€‚</p>
<ul>
<li>å½“å‰åŒºé—´æœ‰èµ‹å€¼æ ‡è®°æ—¶ï¼Œå¯¹å„¿å­åŒºé—´è¿›è¡Œèµ‹å€¼ï¼ŒåŒæ—¶æ ‡è®°ä¼ ç»™å„¿å­ï¼ŒæŠŠå½“å‰åŒºé—´ä»¥åŠå„¿å­åŒºé—´çš„åŠ æ ‡è®°æ¸…é™¤</li>
<li>å½“å‰åŒºé—´æ— æ‡’æƒ°æ ‡è®°ï¼Œä½†æœ‰åŠ æ ‡è®°ï¼Œå¯¹å„¿å­åŒºé—´è¿›è¡Œä¿®æ”¹ï¼ŒåŒæ—¶æ ‡è®°ä¸‹ä¼ , ä¸‹ä¼ æ—¶æ³¨æ„ã€‚è‹¥å„¿å­åŒºé—´æœ‰èµ‹å€¼æ ‡è®°ï¼Œæ­¤æ—¶éœ€è¦å°†å„¿å­åŒºé—´çš„èµ‹å€¼æ ‡è®°åŠ ä¸Šå½“å‰çš„åŠ æ ‡è®°çš„å€¼ï¼ŒåŒæ—¶å°†å¯å„¿å­åŒºé—´åŠ æ ‡è®°æ¸…é™¤ã€‚è‹¥å„¿å­åŒºé—´æ— èµ‹å€¼æ ‡è®°ï¼Œç›´æ¥å°†åŠ æ ‡è®°ä¸‹ä¼ å³å¯ã€‚</li>
</ul>
<p>ä¿®æ”¹ä¹Ÿæœ‰å¦‚ä¸‹è®¨è®º</p>
<ul>
<li>æ‰§è¡Œèµ‹å€¼ä¿®æ”¹æ—¶ï¼ŒåŒºé—´æ‰“ä¸Šèµ‹å€¼æ ‡è®°æ—¶ï¼Œå°†åŠ æ ‡è®°æ¸…é™¤</li>
<li>æ‰§è¡ŒåŠ å€¼ä¿®æ”¹æ—¶ï¼Œå¦‚å½“å‰åŒºé—´æœ‰èµ‹å€¼æ ‡è®°ï¼Œåˆ™åœ¨èµ‹å€¼æ ‡è®°ä¸ŠåŠ ä¸Šå½“å‰çš„åŠ å€¼ï¼Œè‹¥æ— èµ‹å€¼æ ‡è®°ï¼ŒåŒºé—´<strong>åŠ </strong>ä¸ŠåŠ å€¼æ ‡è®°å³å¯ã€‚</li>
</ul>
<pre><code>
void PushDown(int rt){
    if (changetag[rt] != -1){
        Max[rt&lt;&lt;1] = changetag[rt]; Max[rt&lt;&lt;1|1] = changetag[rt];
        changetag[rt &lt;&lt; 1] = changetag[rt]; addtag[rt &lt;&lt; 1] = 0;
        changetag[rt &lt;&lt; 1 | 1] = changetag[rt]; addtag[rt &lt;&lt; 1 | 1] = 0;
        changetag[rt] = -1;
    }else if (addtag[rt]){
        Max[rt&lt;&lt;1] += addtag[rt]; Max[rt&lt;&lt;1|1] += addtag[rt];
        if (changetag[rt&lt;&lt;1] != -1) changetag[rt&lt;&lt;1] += addtag[rt];
        else addtag[rt&lt;&lt;1] += addtag[rt];
        if (changetag[rt&lt;&lt;1|1] != -1) changetag[rt&lt;&lt;1|1] += addtag[rt];
        else addtag[rt&lt;&lt;1|1] += addtag[rt];
        addtag[rt] = 0;        
    }
}
void add(int rt, int l, int r, int L, int R, int C)
{
    if (L &lt;= l &amp;&amp; r &lt;= R){
        Max[rt] = Max[rt] + C;
        if (changetag[rt] == -1) addtag[rt] += C;
        else changetag[rt] += C;
        return;
    }
}
void change()
{
}

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[HDU 5306 Gorgeous Sequence]]></title>
        <id>https://www.akwing.cn/post/hdu-5306-gorgeous-sequence</id>
        <link href="https://www.akwing.cn/post/hdu-5306-gorgeous-sequence">
        </link>
        <updated>2019-06-25T13:16:15.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="çº¿æ®µæ ‘">çº¿æ®µæ ‘</h1>
]]></summary>
        <content type="html"><![CDATA[<h1 id="çº¿æ®µæ ‘">çº¿æ®µæ ‘</h1>
<!-- more -->
<blockquote>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5306">HDU 5306 Gorgeous Sequence</a></p>
</blockquote>
<p>ç»´æŠ¤ä¸€ä¸ªæ•°ç»„ï¼Œæ”¯æŒä»¥ä¸‹å‡ ç§æ“ä½œ</p>
<ul>
<li>ç»™å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo separator="true">,</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">l,r,x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span></span></span></span>,å¯¹äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>âˆˆ</mo><mo>[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">i\in[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span> å°†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å˜ä¸º <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">min(a_i,x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>ã€‚</li>
<li>ç»™å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mo separator="true">,</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">l,r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>,å¯¹äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>âˆˆ</mo><mo>[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">i\in[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span>,è¯¢é—®åŒºé—´å†…<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„æœ€å¤§å€¼ã€‚</li>
<li>ç»™å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mo separator="true">,</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">l,r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>,è¯¢é—® <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mi>l</mi></mrow><mi>r</mi></msubsup><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\sum_{i=l}^r a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ç”¨çº¿æ®µæ ‘æ¥ç»´æŠ¤è¿™ä¸ªæ•°ç»„ï¼Œçº¿æ®µæ ‘ç»´æŠ¤åŒºé—´<strong>æœ€å¤§å€¼</strong> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">max</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span></span></span></span> ,<strong>ä¸¥æ ¼æ¬¡å¤§å€¼</strong> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">sec</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span></span></span></span>ï¼Œ<strong>æœ€å¤§å€¼çš„ä¸ªæ•°</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">cnt</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span></span></span></span>,å’Œ<strong>åŒºé—´å’Œ</strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">sum</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span></span></span></span>.è‹¥ä½¿åŒºé—´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span>å¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>å–<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span></span></span></span>ï¼Œå…ˆé€’å½’å®šä½åˆ°è¿™ä¸ªåŒºé—´ã€‚ç„¶åï¼š</p>
<ul>
<li>è‹¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo>&lt;</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">max&lt;x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>,ç›´æ¥è¿”å›</li>
<li>è‹¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>c</mi><mo>&lt;</mo><mi>x</mi><mo>&lt;</mo><mi>m</mi><mi>a</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">sec&lt;x&lt;max</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span></span></span></span>,æˆ‘ä»¬å°†æ­¤æ—¶åŒºé—´æœ€å¤§å€¼æ”¹ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>,æ­¤æ—¶åŒºé—´çš„å’Œåº”è¯¥å‡å»<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>n</mi><mi>t</mi><mo>âˆ—</mo><mo>(</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>âˆ’</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">cnt*(max-x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>,åŒæ—¶æ‰“ä¸Šæ ‡è®°.</li>
<li>å¦åˆ™é€’å½’åˆ°å·¦å³å„¿å­ç»§ç»­å¤„ç†</li>
</ul>
<p>æ•´ä½“æ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mo>(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo>)</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>n</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">O((n+m)log_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>,ä¸ä¼šè¯ã€‚
å¯¹äºæ ‡è®°æˆ‘ä»¬ä¸éœ€è¦å¦å¼€æ•°ç»„è®°å½•ï¼Œå½“å·¦å³å„¿å­çš„æœ€å€¼å¤§äºçˆ¶äº²èŠ‚ç‚¹çš„æœ€å€¼æ—¶ï¼Œè¯´æ˜è¿™ä¸ªçˆ¶äº²èŠ‚ç‚¹ä¸€å®šè¢«ä¿®æ”¹è¿‡ï¼Œè¿™æ—¶å¤„ç†å·¦å³å„¿å­å³å¯ã€‚å¦å¤–è¿˜è¦æ˜ç¡®æˆ‘ä»¬ä¿®æ”¹çš„åŒºé—´ä¸€å®šæ˜¯æ»¡è¶³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>c</mi><mo>&lt;</mo><mi>x</mi><mo>&lt;</mo><mi>m</mi><mi>a</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">sec&lt;x&lt;max</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span></span></span></span>ï¼Œå› æ­¤å¯¹äºåŒºé—´å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">sum</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span></span></span></span>çš„ä¿®æ”¹åªå’Œæœ€å¤§å€¼æœ‰å…³ã€‚
è¿™é¢˜æ—¶é—´å¡çš„ä¹Ÿæ¯”è¾ƒç´§</p>
<pre><code>
#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
using namespace std;
const int N = 1e6 + 10;
typedef long long ll;
struct tree{
    ll sum, mx, se, cnt;
}T[N&lt;&lt;2];
ll add[N &lt;&lt; 2],a[N];
int n, m;
void pushup(int rt)
{
    int lc = rt &lt;&lt; 1, rc = rt &lt;&lt; 1 | 1;
    if (T[lc].mx &gt; T[rc].mx)
    {
        T[rt].mx = T[lc].mx;
        T[rt].cnt = T[lc].cnt;
        T[rt].se = max(T[lc].se, T[rc].mx);
    }
    else if (T[lc].mx &lt; T[rc].mx)
    {
        T[rt].mx = T[rc].mx;
        T[rt].cnt = T[rc].cnt;
        T[rt].se = max(T[rc].se, T[lc].mx);
    }
    else
    {
        T[rt].mx = T[rc].mx;
        T[rt].cnt = T[rc].cnt+T[lc].cnt;
        T[rt].se = max(T[rc].se, T[lc].se);
    }
    T[rt].sum = T[lc].sum + T[rc].sum;
}
void pushdown(int rt)
{
    int lc = rt &lt;&lt; 1, rc = rt &lt;&lt; 1 | 1;
    if (T[lc].mx &gt; T[rt].mx){
        T[lc].sum -= T[lc].cnt*(T[lc].mx - T[rt].mx);
        T[lc].mx = T[rt].mx;
    }
    if (T[rc].mx &gt; T[rt].mx)
    {
        T[rc].sum -= T[rc].cnt*(T[rc].mx - T[rt].mx);
        T[rc].mx = T[rt].mx;
    }
}
void build(int rt, int l, int r)
{
    if (l == r){
        T[rt].sum = T[rt].mx = a[l];
        T[rt].cnt = 1;
        T[rt].se = 0;
        return;
    }
    int mid = (l + r) &gt;&gt; 1;
    build(rt &lt;&lt; 1, l, mid);
    build(rt &lt;&lt; 1 | 1, mid + 1, r);
    pushup(rt);
}
void change(int rt, int l, int r, int x, int y, int val)
{
    if (T[rt].mx &lt;= val) return;
    if (x &lt;= l&amp;&amp;r &lt;= y&amp;&amp;val&gt;T[rt].se)
    {
        T[rt].sum -= (T[rt].mx - val)*T[rt].cnt;
        T[rt].mx = val;
        add[rt] = val;
        return;
    }
     pushdown(rt);
    int mid = (l + r) &gt;&gt; 1;
    if (x &lt;= mid) change(rt &lt;&lt; 1, l, mid, x, y, val);
    if (y &gt; mid)  change(rt &lt;&lt; 1 | 1, mid + 1, r, x, y, val);
    pushup(rt);
}
ll qs(int rt, int l, int r, int x, int y)
{
    if (x &lt;= l&amp;&amp;r &lt;= y) return  T[rt].sum;
     pushdown(rt);
    int mid = (l + r) &gt;&gt; 1;
    ll ans = 0;
    if (x &lt;= mid) ans += qs(rt &lt;&lt; 1, l, mid, x, y);
    if (y &gt; mid) ans += qs(rt &lt;&lt; 1 | 1, mid + 1, r, x, y);
    return ans;
}
ll qmx(int rt, int l, int r, int x, int y)
{
    if (x &lt;= l&amp;&amp;r &lt;= y) return  T[rt].mx;
    pushdown(rt);
    int mid = (l + r) &gt;&gt; 1;
    ll ans1 = 0,ans2=0;
    if (x &lt;= mid) ans1 = qmx(rt &lt;&lt; 1, l, mid, x, y);
    if (y &gt; mid) ans2 = qmx(rt &lt;&lt; 1 | 1, mid + 1, r, x, y);
    return max(ans1, ans2);
}
int main()
{
    int t;
    scanf(&quot;%d&quot;, &amp;t);
    while (t--)
    {
        scanf(&quot;%d%d&quot;, &amp;n, &amp;m);
        for (int i = 1; i &lt;= n; i++)
            scanf(&quot;%lld&quot;, &amp;a[i]);
        build(1, 1, n);
        while (m--)
        {
            int op, x, y, val;
            scanf(&quot;%d%d%d&quot;, &amp;op, &amp;x, &amp;y);
            if (op == 0){
                scanf(&quot;%d&quot;, &amp;val);
                change(1, 1, n, x, y, val);
            }
            else if (op == 1){
                printf(&quot;%lld\n&quot;, qmx(1, 1, n, x, y));
            }
            else if (op == 2){
                printf(&quot;%lld\n&quot;, qs(1, 1, n, x, y));
            }
        }
    }
        return 0;
}

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[HDU 6278 Just h-index]]></title>
        <id>https://www.akwing.cn/post/hdu-6278-just-h-index</id>
        <link href="https://www.akwing.cn/post/hdu-6278-just-h-index">
        </link>
        <updated>2019-06-24T07:14:19.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="è«é˜Ÿæ ‘çŠ¶æ•°ç»„ä¸»å¸­æ ‘">è«é˜Ÿ+æ ‘çŠ¶æ•°ç»„/ä¸»å¸­æ ‘</h1>
]]></summary>
        <content type="html"><![CDATA[<h1 id="è«é˜Ÿæ ‘çŠ¶æ•°ç»„ä¸»å¸­æ ‘">è«é˜Ÿ+æ ‘çŠ¶æ•°ç»„/ä¸»å¸­æ ‘</h1>
<!-- more -->
<blockquote>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=6278">Just h-index</a></p>
</blockquote>
<p>æœ¬é¢˜å¯ä»¥äºŒåˆ†ç­”æ¡ˆï¼Œå‡è®¾äºŒåˆ†çš„ç­”æ¡ˆä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span></span></span></span>,åŒºé—´é•¿åº¦ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>e</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">len</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span></span></span></span>ã€‚</p>
<ul>
<li>å¦‚æœåŒºé—´å¤§äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span></span></span></span>çš„æ•°ä¸ªæ•°å¤§äºç­‰äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span></span></span></span>ä¸ªï¼Œé‚£ä¹ˆè¿™ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span></span></span></span>å°±æ˜¯æ»¡è¶³çš„ã€‚</li>
<li>ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šå¦‚æœè¯¥åŒºé—´ç¬¬ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>e</mi><mi>n</mi><mo>âˆ’</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">len-mid+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>å¤§çš„æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&gt;</mo><mo>=</mo><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">&gt;=mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span></span></span></span>ï¼Œé‚£ä¹ˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span></span></span></span>ä¹Ÿæ˜¯æ»¡è¶³çš„ã€‚</li>
</ul>
<p>å¯¹äºç¬¬ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥ç”¨è«é˜Ÿ+æ ‘çŠ¶æ•°ç»„è§£å†³ã€‚ç¬¬äºŒä¸ªå°±æ˜¯æ±‚è§£åŒºé—´ç¬¬<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span></span></span></span>å¤§çš„æ¨¡æ¿äº†ï¼Œåˆ©ç”¨ä¸»å¸­æ ‘ã€‚
ä¸»å¸­æ ‘æ¯”è«é˜Ÿå¿«äº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1000</mn><mo>+</mo><mi>m</mi><mi>s</mi><mo>!</mo></mrow><annotation encoding="application/x-tex">1000+ms!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">s</span><span class="mclose">!</span></span></span></span></p>
<p><a href="https://www.akwing.cn/post-images/1561361398782.png"></a></p>
<blockquote>
<p>ä¸»å¸­æ ‘</p>
</blockquote>
<pre><code>#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;queue&gt;
#include &lt;string&gt;
#include&lt;cmath&gt;
#include&lt;functional&gt;
using namespace std;
const int N = 1e5+10;
typedef long long ll;
struct tree{
	int lc, rc, cnt;
}T[N&lt;&lt;5];
int n, m,tot,rm;
int a[N],root[N];
void build(int &amp;rt,int l, int r)
{
	rt = ++tot;
	if (l &lt; r)
	{
		int mid = (l + r) &gt;&gt; 1;
		build(T[rt].lc, l, mid);
		build(T[rt].rc, mid + 1, r);
	}
}
void update(int &amp;cur, int pre, int l, int r, int pos)
{
	cur = ++tot;
	T[cur] = T[pre];
	T[cur].cnt++;
	if (l == r) return;
	int mid = (l + r) &gt;&gt; 1;
	if (pos &lt;= mid) update(T[cur].lc, T[pre].lc, l, mid, pos);
	else update(T[cur].rc, T[pre].rc, mid + 1, r, pos);
}
int query(int x, int y, int l, int r, int k)
{
	if (l == r) return l;
	int s = T[T[y].lc].cnt - T[T[x].lc].cnt;
	int mid = (l + r) &gt;&gt; 1;
	if (k &lt;= s)
		return query(T[x].lc, T[y].lc, l, mid, k);
	else
		return query(T[x].rc, T[y].rc, mid + 1, r, k - s);
}
int solve(int l, int r)
{
	int s = r - l + 1;
	int L = 1, R = s;
	while (L &lt; R)
	{
		int mid = (L + R+1) &gt;&gt; 1;
		int k = query(root[l - 1], root[r], 1, rm, s - mid + 1);
		if (k &gt;= mid) L = mid;
		else R = mid - 1;
	}
	return L;
}
int main()
{
	while (scanf(&quot;%d%d&quot;, &amp;n, &amp;m) != EOF)
	{
		tot = 0;
		rm = -1;
		for (int i = 1; i &lt;= n; i++)
		{
			scanf(&quot;%d&quot;, &amp;a[i]);
			rm = max(rm, a[i]);
		}
		//build(root[0], 1, rm);
		for (int i = 1; i &lt;= n; i++)
			update(root[i], root[i - 1], 1, rm, a[i]);
		for (int i = 1; i &lt;= m; i++)
		{
			int l, r;
			scanf(&quot;%d%d&quot;, &amp;l, &amp;r);
			printf(&quot;%d\n&quot;,solve(l, r));
		}
	}
	return 0;
}
</code></pre>
<blockquote>
<p>è«é˜Ÿ+æ ‘çŠ¶æ•°ç»„</p>
</blockquote>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;math.h&gt;
#include&lt;cstring&gt;
#define mem(a,b) memset(a,b,sizeof(a))
#define ll long long 
using namespace std; 
#define lowbit(x) (x&amp;(-x))
const int N = 1e5+10;
int b[N],Ans[N];
int c[N], a[N];
int g[N];
int n, m,block,tot, ans;
int  k;
int l, r;
struct query{
	int id, l, r;
}q[N];
bool cmp1(query o1, query o2)
{
	if (b[o1.l] == b[o2.l]) 
		return o1.r &lt; o2.r; 
	return o1.l &lt; o2.l;
}
void update(int pos,int val)
{
	for (; pos &lt;= n; pos += lowbit(pos))
		c[pos] += val;
}
int ask(int pos)
{
	int res=0;
	for (; pos; pos -= lowbit(pos))
		res += c[pos];
	return res;
}
int solve()
{
	int cnt = r - l + 1;
	int L = 1, R = cnt;
	while (L &lt; R)
	{
		int mid = (L + R+1) &gt;&gt; 1;
		if (cnt - ask(mid - 1) &gt;= mid) L = mid;
		else R = mid - 1;
	}
	 return L;
}
void Mo()
{
	l = 1, r = 0;
	for (int i = 1; i &lt;= m; i++)
	{
		while (r &lt; q[i].r) update(a[++r],1);
		while (r&gt; q[i].r)  update(a[r--], -1);
		while (l &lt; q[i].l) update(a[l++], -1);
		while (l&gt;q[i].l) update(a[--l], 1);
		Ans[q[i].id] = solve();
	}
	for (int i = 1; i &lt;= m; i++)
		printf(&quot;%d\n&quot;, Ans[i]);
}
int main()
{
	while (scanf(&quot;%d%d&quot;, &amp;n, &amp;m) != EOF)
	{
		block = sqrt(n);
		for (int i = 1; i &lt;= n; i++)
		{
			scanf(&quot;%d&quot;, &amp;a[i]);
			b[i] = (i - 1) / block + 1;
			c[i] = 0;
		}
		for (int i = 1; i &lt;= m; i++)
		{
			scanf(&quot;%d%d&quot;, &amp;q[i].l, &amp;q[i].r);
			q[i].id = i;
		}
		sort(q + 1, q + m + 1, cmp1);
		Mo();
	}
	return 0;
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[HDU 6534 Chika and Friendly Pairs]]></title>
        <id>https://www.akwing.cn/post/hdu-6534-chika-and-friendly-pairs</id>
        <link href="https://www.akwing.cn/post/hdu-6534-chika-and-friendly-pairs">
        </link>
        <updated>2019-06-24T03:26:14.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="è«é˜Ÿæ ‘çŠ¶æ•°ç»„ç¦»æ•£åŒ–">è«é˜Ÿ+æ ‘çŠ¶æ•°ç»„+ç¦»æ•£åŒ–</h1>
<h2 id="2019ccpcæ¹–å—å…¨å›½é‚€è¯·èµ›å¹¿ä¸œçœèµ›-æ±Ÿè‹çœèµ›cé¢˜">2019CCPCæ¹–å—å…¨å›½é‚€è¯·èµ›ï¼ˆå¹¿ä¸œçœèµ›ã€æ±Ÿè‹çœèµ›ï¼‰Cé¢˜</h2>
]]></summary>
        <content type="html"><![CDATA[<h1 id="è«é˜Ÿæ ‘çŠ¶æ•°ç»„ç¦»æ•£åŒ–">è«é˜Ÿ+æ ‘çŠ¶æ•°ç»„+ç¦»æ•£åŒ–</h1>
<h2 id="2019ccpcæ¹–å—å…¨å›½é‚€è¯·èµ›å¹¿ä¸œçœèµ›-æ±Ÿè‹çœèµ›cé¢˜">2019CCPCæ¹–å—å…¨å›½é‚€è¯·èµ›ï¼ˆå¹¿ä¸œçœèµ›ã€æ±Ÿè‹çœèµ›ï¼‰Cé¢˜</h2>
<!-- more -->
<blockquote>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=6534">C Chika and Friendly Pairs</a></p>
</blockquote>
<p>è¿™é¢˜æ˜¯æ±Ÿè‹çœèµ›çš„é¢˜ç›®ï¼Œå½“æ—¶æˆ‘å’Œå¯¹å‹åšå‡ºäº†4ä¸ªé¢˜ä¹‹åï¼Œæˆ‘ä¸€ä¸ªäººå°±ä¸€ç›´åœ¨çœ‹è¿™é¢˜ï¼Œç„¶åå°±ä¸€ç›´çœ‹åˆ°äº†æ¯”èµ›ç»“æŸä¹Ÿä¸ä¼šåšï¼Œæ­£å¥½æ˜¨å¤©å­¦äº†è«é˜Ÿï¼Œå°±æŠŠè¿™é¢˜è¡¥ä¸€ä¸‹ã€‚</p>
<p>é¦–å…ˆè¿™é¢˜é¢˜æ„å¾ˆæ˜ç¡®ï¼Œé¢˜ç›®æ‰€æ±‚ç­”æ¡ˆéœ€è¦æ»¡è¶³çš„æ¡ä»¶æ˜¯ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>&lt;</mo><mi>j</mi><mo separator="true">,</mo><mi mathvariant="normal">âˆ£</mi><msub><mi>a</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mi>a</mi><mi>j</mi></msub><mi mathvariant="normal">âˆ£</mi><mo>&lt;</mo><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">i&lt;j, |a_i - a_j|&lt;=k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span> ï¼ŒåŒ–ç®€ä¸€ä¸‹å˜æˆ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>&lt;</mo><mi>j</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>i</mi></msub><mo>âˆ’</mo><mi>k</mi><mo>=</mo><mo>&lt;</mo><msub><mi>a</mi><mi>j</mi></msub><mo>&lt;</mo><mo>=</mo><msub><mi>a</mi><mi>i</mi></msub><mo>+</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">i&lt;j, a_i-k=&lt;a_j&lt;=a_i+k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8252079999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span> , ç»™å‡º <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span> ä¸ªè¯¢é—®ï¼Œå¯¹äºè¿™äº›è¯¢é—®æˆ‘ä»¬å¯ä»¥ç”¨è«é˜Ÿæ¥å¤„ç†ã€‚å…³é”®åœ¨äºæˆ‘ä»¬æ€ä¹ˆå®ç°å¿«é€Ÿçš„è½¬ç§»å‘¢ï¼Ÿ
åŠ å…¥æˆ‘ä»¬å½“å‰åŒºé—´ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span>ï¼Œä¹Ÿå°±æ˜¯å·²çŸ¥åŒºé—´ã€‚æˆ‘ä»¬éœ€è¦è½¬ç§»åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mi>q</mi><mo>[</mo><mi>i</mi><mo>]</mo><mi mathvariant="normal">.</mi><mi>l</mi><mo separator="true">,</mo><mi>q</mi><mo>[</mo><mi>i</mi><mo>]</mo><mi mathvariant="normal">.</mi><mi>r</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[q[i].l,q[i].r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span> ï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬æ¯æ¬¡è½¬ç§»<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mo separator="true">,</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">l,r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span> çš„æ—¶ä¾¯ï¼Œå·²çŸ¥åŒºé—´éƒ½åœ¨æˆ‘ä»¬çš„ä¸€ä¾§ï¼Œä¹Ÿå°±æ˜¯è¯´æ»¡è¶³äº† <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>&lt;</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i&lt;j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span> è¿™ä¸ªå…³ç³»ï¼Œæˆ‘ä»¬åªéœ€è¦ç»Ÿè®¡ è½¬ç§»å½“å‰ä½ç½®å¯¹ç­”æ¡ˆå¸¦æ¥çš„å½±å“å³å¯ã€‚ ç”±åˆšåˆšæ¨çš„å…³ç³»å¼å¯å¾—ï¼Œå½“æˆ‘ä»¬æ¯è½¬ç§»ä¸€æ¬¡æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦ç»Ÿè®¡æˆ‘ä»¬çš„å·²çŸ¥åŒºé—´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span>å†…æœ‰å¤šä¸ªæ•°æ»¡è¶³ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>âˆ’</mo><mi>k</mi><mo>=</mo><mo>&lt;</mo><msub><mi>a</mi><mi>j</mi></msub><mo>&lt;</mo><mo>=</mo><msub><mi>a</mi><mi>i</mi></msub><mo>+</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">a_i-k=&lt;a_j&lt;=a_i+k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8252079999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span> ,è¿™ä¸ªå¯ä»¥ç”¨æ ‘çŠ¶æ•°ç»„æ¥è§£å†³ã€‚è¿™æ ·æˆ‘ä»¬å®ç°äº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>n</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">O(log_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> è½¬ç§»ã€‚
å¦å¤–æ•°æ¯”è¾ƒå¤§ï¼Œå…ˆç¦»æ•£åŒ–ã€‚å¦å¤–ä¸€äº›ç»†èŠ‚åœ¨ä»£ç ä¸­è¯´æ˜ã€‚
æ€»å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mrow><mn>3</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>n</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^{3/2} log_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.138em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;math.h&gt;
#include&lt;cstring&gt;
#define mem(a,b) memset(a,b,sizeof(a))
#define ll long long 
using namespace std; 
#define lowbit(x) (x&amp;(-x))
const int N = 27000+10;
int b[N],Ans[N];
int c[N];
int  a[N], g[N];
int up[N], low[N];
int n, m,block,tot, ans;
int  k;
int l, r;
struct query{
	int id, l, r,t;
}q[N];
bool cmp1(query o1, query o2)
{
	if (b[o1.l] == b[o2.l]) 
		return o1.r &lt; o2.r; 
	return o1.l &lt; o2.l;
}
void update(int pos,int val)
{
	for (; pos &lt;= tot; pos += lowbit(pos))
		c[pos] += val;
}
int ask(int pos)
{
	int res=0;
	for (; pos; pos -= lowbit(pos))
		res += c[pos];
	return res;
}
void add(int pos)
{
	int s = ask(up[pos]) - ask(low[pos] - 1);
	ans += s;
	update(a[pos], 1);//è¿™ä¸ªæœ€ååŠ ï¼Œå¦‚æœåˆšå¼€å§‹å°±åŠ çš„è¯å°±ä¼šæŠŠæœ¬èº«ä¹Ÿç®—è¿›å»äº†
}
void del(int pos)
{
	update(a[pos], -1);//è¿™ä¸ªå¿…é¡»åˆšå¼€å§‹å°±å‡å»ï¼Œä¹Ÿæ˜¯é˜²æ­¢æŠŠè‡ªèº«ç®—è¿›å»
	int s = ask(up[pos]) - ask(low[pos] - 1);
	ans -= s;
}
void Mo()
{
	int l = 1, r = 0;
	for (int i = 1; i &lt;= m; i++)
	{
		while (l &lt; q[i].l) del(l++);
		while (l&gt;q[i].l) add(--l);
		while (r &lt; q[i].r) add(++r);
		while (r&gt; q[i].r)  del(r--);
		Ans[q[i].id] = ans;
	}
	for (int i = 1; i &lt;= m; i++)
		printf(&quot;%d\n&quot;, Ans[i]);
}
int main()
{
	scanf(&quot;%d%d%d&quot;, &amp;n, &amp;m,&amp;k);
	block = sqrt(n);
	for (int i = 1; i &lt;= n; i++)
	{
		scanf(&quot;%d&quot;, &amp;a[i]);
		g[i] = a[i];
		b[i] = (i - 1) / block + 1;
	}
	sort(g + 1, g + n + 1);
	tot = unique(g + 1, g + n + 1) - g - 1;
	for (int i = 1; i &lt;= n; i++)
	{
		up[i] = upper_bound(g + 1, g + tot + 1, a[i] + k) - g -1 ;//å› ä¸ºéœ€è¦æ‰¾åˆ°&lt;=a[i]+k,æ‰€ä»¥å‡1
		low[i] = lower_bound(g + 1, g + tot + 1, a[i] - k) - g;//è¿™ä¸¤ä¸ªä¸Šä¸‹åŒºé—´å¿…é¡»é¢„å¤„ç†ï¼Œæ¯æ¬¡è½¬ç§»çš„æ—¶å€™å†æ±‚è¿™ä¸ªä¸Šä¸‹ç•Œå°±ä¼šè¶…æ—¶ã€‚
		a[i] = lower_bound(g + 1, g + tot + 1, a[i]) - g;
	}
	for (int i = 1; i &lt;= m; i++)
	{
		scanf(&quot;%d%d&quot;, &amp;q[i].l,&amp;q[i].r);
		q[i].id = i;
	}
	sort(q + 1, q + m + 1, cmp1);
	Mo();
	return 0;
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[BZOJ 2038 å°Zçš„è¢œå­ ]]></title>
        <id>https://www.akwing.cn/post/bzoj-2038-xiao-z-de-wa-zi</id>
        <link href="https://www.akwing.cn/post/bzoj-2038-xiao-z-de-wa-zi">
        </link>
        <updated>2019-06-23T14:51:29.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="è«é˜Ÿ">è«é˜Ÿ</h2>
]]></summary>
        <content type="html"><![CDATA[<h2 id="è«é˜Ÿ">è«é˜Ÿ</h2>
<!-- more -->
<p>è¿™é¢˜æ˜¯ä¸ªè«é˜Ÿæ¨¡æ¿é¢˜ï¼Œä»Šå¤©å­¦ä¹ äº†ä¸€ä¸‹è«é˜Ÿï¼Œè«é˜Ÿç”¨åˆ°äº†åˆ†å—ã€‚è«é˜Ÿçš„å·§å¦™ä¹‹å¤„å°±åœ¨äºå®ƒçš„æ’åº+è½¬ç§»ã€‚
è¿™é¢˜æ˜¯ä¸ªä¸å¸¦ä¿®è«é˜Ÿï¼Œå…ˆæŒ‰ç…§è¯¢é—®çš„å·¦ç«¯ç‚¹æ’åºï¼Œå·¦ç«¯ç‚¹åœ¨åŒä¸€åŒºé—´å†æŒ‰ç…§å³ç«¯ç‚¹æ’åºï¼Œé€šå¸¸ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span> è½¬ç§»å¯¹ç­”æ¡ˆå¸¦æ¥çš„å½±å“å¯ä»¥é¢„å…ˆæ¨å‡ºæ¥ï¼Œç„¶åå®ç°äº† <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>è½¬ç§» ï¼Œæ¯”å¦‚è¿™é¢˜çš„ç­”æ¡ˆå°±æ˜¯</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mo>(</mo><mo>âˆ‘</mo><mtext>Â </mtext><msubsup><mi>C</mi><mrow><mi>c</mi><mi>n</mi><mi>t</mi><mo>[</mo><mi>x</mi><mo>]</mo></mrow><mn>2</mn></msubsup><mo>)</mo></mrow><mrow><mi>C</mi><mrow><mo fence="true">(</mo><mfrac linethickness="0px"><mn>2</mn><mrow><mi>r</mi><mo>âˆ’</mo><mi>l</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mo fence="true">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">\dfrac{(\sum\ C_{cnt[x]}^2)}{ C{2 \choose r-l+1}} 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.8895469999999994em;vertical-align:-1.188439em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7011079999999996em;"><span style="top:-2.214892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.895108em;"><span style="top:-2.355em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mbin mtight">âˆ’</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.144em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.887em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999998em;"><span style="top:-2.378em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">t</span><span class="mopen mtight">[</span><span class="mord mathdefault mtight">x</span><span class="mclose mtight">]</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.49699999999999994em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.188439em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>åŒ–ç®€ä¸€ä¸‹å°±æ˜¯</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mo>(</mo><mo>âˆ‘</mo><mtext>Â </mtext><mo>(</mo><mrow><mi>c</mi><mi>n</mi><mi>t</mi><mo>[</mo><mi>x</mi><mo>]</mo></mrow><msup><mo>)</mo><mn>2</mn></msup><mo>)</mo><mo>âˆ’</mo><mo>(</mo><mi>r</mi><mo>âˆ’</mo><mi>l</mi><mo>+</mo><mn>1</mn><mo>)</mo></mrow><mrow><mo>(</mo><mi>r</mi><mo>âˆ’</mo><mi>l</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo>(</mo><mi>r</mi><mo>âˆ’</mo><mi>l</mi><mo>)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex"> \dfrac{ (\sum\ ({cnt[x]})^2 ) -(r-l+1) }{ (r-l+1)(r-l) } 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.427108em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911079999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="mspace">Â </span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault">x</span><span class="mclose">]</span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>å¦‚æœå¢åŠ æ•°ï¼Œè½¬ç§»çš„æ—¶å€™å°±æ˜¯å¢åŠ äº† <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>c</mi><mi>n</mi><mi>t</mi><mo>[</mo><mi>x</mi><mo>]</mo><mo>+</mo><mn>1</mn><msup><mo>)</mo><mn>2</mn></msup><mo>âˆ’</mo><mo>(</mo><mi>c</mi><mi>n</mi><mi>t</mi><mo>[</mo><mi>x</mi><mo>]</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">(cnt[x]+1)^2 - (cnt[x])^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">c</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault">x</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">c</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord mathdefault">x</span><span class="mclose">]</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;math.h&gt;
#include&lt;cstring&gt;
#define mem(a,b) memset(a,b,sizeof(a))
#define ll long long 
using namespace std; 
const int N = 5e4+10;
int a[N], cnt[N],b[N];
int n, m,block;
ll ans;
ll gcd(ll a, ll b)
{
	if (!b) return a;
	return gcd(b, a%b);
}
struct query{
	int id, l, r;
	int aa, bb;
}q[N];
bool cmp1(query o1, query o2)
{
	if (b[o1.l] != b[o2.l]) return o1.l &lt; o2.l;
	return o1.r &lt; o2.r;
}
bool cmp2(query o1, query o2)
{
	return o1.id &lt; o2.id;
}
void update(int pos,int val)
{
	ans -= (cnt[a[pos]] * cnt[a[pos]]);
	cnt[a[pos]] += val;
	ans += (cnt[a[pos]] * cnt[a[pos]]);
	
}
int main()
{
	scanf(&quot;%d%d&quot;, &amp;n, &amp;m);
	block = sqrt(n);
	for (int i = 1; i &lt;= n; i++)
	{
		scanf(&quot;%d&quot;, &amp;a[i]);
		b[i] = (i - 1) / block + 1;
	}
	for (int i = 1; i &lt;= m; i++)
	{
		scanf(&quot;%d%d&quot;, &amp;q[i].l, &amp;q[i].r);
		q[i].id = i;
	}
	sort(q + 1, q + m + 1,cmp1);
	int l = 1, r = 0;
	for (int i = 1; i &lt;= m; i++)
	{
		while (l &lt; q[i].l) update(l++, -1);
		while (l&gt;q[i].l) update(--l, 1);
		while (r &lt; q[i].r) update(++r, 1);
		while (r&gt;q[i].r) update(r--, -1);
		if (q[i].l == q[i].r){
			q[i].aa = 0;
			q[i].bb = 1;
			continue;
		}
		ll aa = ans - (q[i].r - q[i].l + 1);
		ll bb = (q[i].r - q[i].l + 1LL)*(q[i].r - q[i].l);
		ll d = gcd(aa, bb);
		q[i].aa = aa / d, q[i].bb = bb / d;
	}
	sort(q + 1, q + m + 1, cmp2);
	for (int i = 1; i &lt;= m; i++)
	{
		printf(&quot;%d/%d\n&quot;, q[i].aa, q[i].bb);
	}
	return 0;
}
</code></pre>
<p>å¸¦ä¿®æ”¹çš„æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ
å¯ä»¥å†å¢åŠ ä¸€ä¸ªæ—¶é—´è®°å½•æœ€è¿‘æ›´æ”¹çš„æ—¶é—´ï¼Œè¿™ä¸ªæ—¶ä¾¯ä¸ºå‡å°å¤æ‚åº¦ï¼Œæ’åºçš„æ—¶å€™å°±è¦å˜ä¸€ä¸‹ï¼Œåˆ†å—çš„å¤§å°ä¹Ÿè¦å˜ã€‚ï¼ˆå—çš„å¤§å°å¾ˆå½±å“æ—¶é—´å¤æ‚åº¦ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬æ¯æ¬¡è½¬ç§»çš„æ—¶å€™<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo separator="true">,</mo><mi>t</mi></mrow><annotation encoding="application/x-tex">l,r,t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span></span></span></span> ä¸€èµ·è½¬ç§»ã€‚å…·ä½“å¯ä»¥çœ‹ä»£ç ã€‚</p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;math.h&gt;
#include&lt;cstring&gt;
#define mem(a,b) memset(a,b,sizeof(a))
#define ll long long 
using namespace std; 
const int N = 5e4+10;
const int M = 1e6 + 10;
int a[N], cnt[M],b[N],Ans[N];
int n, m,block,T,tot, ans;
int l, r;
struct query{
	int id, l, r,t;
}q[N];
struct change{
	int pos, val, pre;
}R[N];
bool cmp1(query o1, query o2)
{
	if (b[o1.l] == b[o2.l]) { 
		if (b[o1.r] == b[o2.r]) 
			return o1.t &lt; o2.t;
		return o1.r &lt; o2.r; 
	}
	return o1.l &lt; o2.l;
}
void add(int pos)
{
	if (cnt[a[pos]]++ == 0) ans++;
}
void del(int pos)
{
	if (--cnt[a[pos]]==0) ans--;
}
void update(int t)
{
	if (R[t].pos &lt;= r&amp;&amp;R[t].pos &gt;= l){
		if (cnt[R[t].val]++ == 0)ans++;
		if (--cnt[a[R[t].pos]] == 0) ans--;
	}
	swap(a[R[t].pos], R[t].val);
}
int main()
{
	scanf(&quot;%d%d&quot;, &amp;n, &amp;m);
	block = pow(n,2.0/3.0);
	for (int i = 1; i &lt;= n; i++)
	{
		scanf(&quot;%d&quot;, &amp;a[i]);
		b[i] = (i - 1) / block + 1;
	}
	for (int i = 1; i &lt;= m; i++)
	{
		char op[3];
		scanf(&quot;%s&quot;, op);
		if (op[0] == 'Q')
		{
			++tot;
			scanf(&quot;%d%d&quot;, &amp;q[tot].l, &amp;q[tot].r);
			q[tot].t = T;
			q[tot].id = tot;
		}
		else if (op[0] == 'R')
		{
			++T;
			scanf(&quot;%d%d&quot;, &amp;R[T].pos, &amp;R[T].val);
		}
	}
	sort(q + 1, q + tot + 1,cmp1);
	l = 1, r = 0;
	int t = 0;
	for (int i = 1; i &lt;= tot; i++)
	{
		while (t &lt; q[i].t) update(++t);
		while (t&gt;q[i].t) update(t--);
		while (l &lt; q[i].l) del(l++);
		while (l&gt;q[i].l) add(--l);
		while (r &lt; q[i].r) add(++r);
		while (r&gt;q[i].r) del(r--);
		Ans[q[i].id] = ans;
	}
	for (int i = 1; i &lt;= tot; i++)
		printf(&quot;%d\n&quot;, Ans[i]);
	return 0;
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Codeforce 1181 D - Irrigation]]></title>
        <id>https://www.akwing.cn/post/codeforce-1181-d-irrigation</id>
        <link href="https://www.akwing.cn/post/codeforce-1181-d-irrigation">
        </link>
        <updated>2019-06-21T07:55:10.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="åŒºé—´ç¬¬kå¤§">åŒºé—´ç¬¬Kå¤§</h2>
]]></summary>
        <content type="html"><![CDATA[<h2 id="åŒºé—´ç¬¬kå¤§">åŒºé—´ç¬¬Kå¤§</h2>
<!-- more -->
<blockquote>
<p><a href="https://codeforces.com/contest/1181/problem/D">D - Irrigation</a></p>
</blockquote>
<p>é¢˜ç›®å¤§è‡´æ„æ€æ˜¯Qä¸ªè¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ä¸€ä¸ªKï¼Œè¾“å‡ºè¡¨ç¤ºç¬¬Kå¹´åº”è¯¥ç”±é‚£ä¸ªåŸå¸‚ä¸¾åŠå¥¥è¿ä¼šã€‚
ä¸¾åŠå¥¥è¿ä¼šçš„æ¬¡åºæ˜¯ç”±ä¸¾åŠæ¬¡æ•°å†³å®šçš„ï¼Œä¸¾åŠæ¬¡æ•°å°‘çš„ä¼˜å…ˆä¸¾åŠï¼ŒåŒç­‰æ¬¡æ•°ç¼–å·å°çš„ä¼˜å…ˆã€‚å¹¶ä¸”å‰Nå¹´çš„ä¸¾åŠæƒ…å†µå·²ç»çŸ¥é“ã€‚
<img src="https://www.akwing.cn/post-images/1561104168882.png" alt=""></p>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥å…ˆå¯¹å‰nå¹´çš„åŸå¸‚ä¸¾åŠçš„æ¬¡æ•°ä»å°åˆ°å¤§æ’åºã€‚å…¶å®æˆ‘ä»¬å¯ä»¥å‘ç°ä¸¾åŠçš„è¿‡ç¨‹å°±æ˜¯ä¸æ–­çš„å»å¡«å¹³æ¯ä¸€è¡Œï¼Œä½¿å¾—å®ƒä»¬çš„å·®è·ä¸æ–­å‡å°ã€‚
<code>S[n]</code> æ•°ç»„ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">S_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> è¡¨ç¤º i å‰é¢æ¯ä¸€åˆ—ä¸ç¬¬iåˆ—æŒå¹³(å¡«æ•°æ˜¯ä¸€è¡Œä¸€è¡Œå¡«çš„ï¼Œç›®çš„æ˜¯å¾—åˆ°æ¯ä¸€åˆ—ç›¸æŒå¹³)ï¼Œæ‰€éœ€è¦çš„å¹´æ•°ã€‚å¯ä»¥å‘ç°kåœ¨æŸä¸€åŒºé—´å†…éƒ½æ˜¯å¡«å›ºå®šçš„åŒºé—´ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mn>1</mn><mo separator="true">,</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">[1,i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>.   å¡«è‡³ä¸ç¬¬iåˆ—é«˜åº¦æŒå¹³.ç„¶åè½¬å‘åŒºé—´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mn>1</mn><mo separator="true">,</mo><mi>i</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[1,i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">i</span><span class="mclose">]</span></span></span></span>  ç»§ç»­è¿™æ ·å¡«ã€‚
æœ‰äº†Sæ•°ç»„æˆ‘ä»¬å¯ä»¥äºŒåˆ†æ‰¾åˆ°å®ƒæ­£åœ¨å¡«çš„åŒºé—´ï¼Œæ¯”å¦‚äºŒåˆ†æ‰¾åˆ°äº†ä½ç½®pos,å³å®ƒå½“å‰æ­£åœ¨å¡«åŒºé—´ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mn>1</mn><mtext>Â </mtext><mi>p</mi><mi>o</mi><mi>s</mi><mo>âˆ’</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">[1~pos-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mspace nobreak">Â </span><span class="mord mathdefault">p</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>,æˆ‘ä»2å¼€å§‹è®¡ç®—Sæ•°ç»„ï¼Œæ‰€ä»¥åŒºé—´å³ç«¯ç‚¹ä¸º <strong>pos-1</strong> (æ³¨æ„æˆ‘æ‰€è¯´çš„åŒºé—´æ˜¯æŒ‡æŒ‰ç…§å‰Nå¹´å‡ºç°æ¬¡æ•°æ’åºåçš„åŒºé—´)ã€‚æ‰¾åˆ°äº†æ‰€å¡«åŒºé—´ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹åŒºé—´é•¿åº¦ <strong>pos-1</strong>  å–æ¨¡ï¼Œå–æ¨¡çš„å¾—åˆ°çš„æ•°Xï¼Œæ­£æ˜¯å®ƒåœ¨å¡«è¿™ä¸ªåŒºé—´å†…çš„ç¬¬Xå¤§æ•°ã€‚ç„¶åè½¬åŒ–ä¸ºä¸»å¸­æ ‘æ±‚è§£(å¹³è¡¡æ—¶ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡æš‚æ—¶ä¸ä¼š)ã€‚</p>
</blockquote>
<pre><code>
#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
#include&lt;queue&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
using namespace std;
const int N = 5e5 + 10;
typedef long long ll;
int n, m, q;
struct node{
	int val, pos;
	bool operator&lt;(const node &amp;o)const{
		return val &lt; o.val;
	}
}a[N];
struct Tree{
	int lc, rc, cnt;
}T[N&lt;&lt;5];
ll s[N];
int ct[N];
int tot,up;
int root[N];
void update(int &amp;cur, int pre, int l, int r, int pos)
{
	cur = ++tot;
	T[cur] = T[pre];
	T[cur].cnt++;
	if (l == r) return;
	int mid = (l + r) &gt;&gt; 1;
	if (pos &lt;= mid) update(T[cur].lc, T[pre].lc, l, mid, pos);
	else update(T[cur].rc, T[pre].rc, mid + 1, r,pos);
}
int query(int x, int y, int l, int r, int k)
{
	if (l == r) return l;
	int s = T[T[y].lc].cnt - T[T[x].lc].cnt;
	int mid = (l + r) &gt;&gt; 1;
	if (k &lt;= s)
		return query(T[x].lc, T[y].lc, l, mid, k);
	else 
		return query(T[x].rc, T[y].rc, mid + 1, r, k-s);
}
int main()
{
	up = 5e5 + 5;
	scanf(&quot;%d%d%d&quot;, &amp;n, &amp;m, &amp;q);
	for (int i = 1; i &lt;= n; i++)
	{
		int x;
		scanf(&quot;%d&quot;, &amp;x);
		ct[x]++;
	}
	for (int i = 1; i &lt;= m; i++)
	{
		a[i].val = ct[i];
		a[i].pos = i;
	}
	sort(a + 1, a + m + 1);
	for (int i = 2; i &lt;= m; i++)
	{
		s[i] = s[i - 1] + (i - 1LL)*(a[i].val - a[i - 1].val); //ä¸€å®šè¦è½¬åŒ–ä¸ºLLï¼Œä¸ç„¶çˆ†int
	}
	for (int i = 1; i &lt;= m; i++)
	{
		update(root[i], root[i - 1], 1, up, a[i].pos);
	}
	while (q--)
	{
		ll k;
		scanf(&quot;%lld&quot;, &amp;k);
		k -= n;
		int pos = lower_bound(s + 1, s + m + 1, k) - s;//å…ˆæ‰¾åˆ°åŒºé—´
		k = (k - s[pos - 1] - 1) % (pos - 1) + 1; //å…ˆå‡å»å‰pos-1ä¸ªåŒºé—´æ‰€éœ€çš„å¹´æ•°ï¼Œç„¶åå†å–æ¨¡å¾—åˆ°åŒºé—´ç¬¬Kå¤§
		int ans = query(root[0], root[pos - 1], 1, up, k);//
		printf(&quot;%d\n&quot;, ans);
	}
	return 0;
}

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æš‘å‡é›†è®­â€”â€”å‘¨èµ›1]]></title>
        <id>https://www.akwing.cn/post/shu-jia-ji-xun-zhou-sai-1</id>
        <link href="https://www.akwing.cn/post/shu-jia-ji-xun-zhou-sai-1">
        </link>
        <updated>2019-06-21T03:22:30.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="æœ€çŸ­è·¯æœ€å°ç”Ÿæˆæ ‘">æœ€çŸ­è·¯/æœ€å°ç”Ÿæˆæ ‘</h2>
]]></summary>
        <content type="html"><![CDATA[<h2 id="æœ€çŸ­è·¯æœ€å°ç”Ÿæˆæ ‘">æœ€çŸ­è·¯/æœ€å°ç”Ÿæˆæ ‘</h2>
<!-- more -->
<blockquote>
<p><strong>C - Borg Maze <a href="http://poj.org/problem?id=3026">POJ - 3026</a></strong></p>
</blockquote>
<p>BFS+æœ€å°ç”Ÿæˆæ ‘</p>
<p>æ¯”èµ›çš„æ—¶å€™æƒ³åˆ°äº†ç”¨ bfsæ±‚å‡ºæ¯ä¸ªç‚¹ä¹‹é—´çš„æœ€çŸ­è·ç¦»ï¼Œç„¶åè·‘ä¸€éMSTã€‚</p>
<p>å¯æ˜¯æƒ³æƒ³å¤æ‚åº¦é«˜è¾¾ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>2</mn></msup><msup><mi>m</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^2m^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ,ç„¶åæ”¾å¼ƒäº†ã€‚èµ›åçœ‹é¢˜è§£ï¼Œç¡®å®æ˜¯è¿™ç§åšæ³•ï¼Œæ¯”èµ›çš„æ—¶å€™è¿˜æ˜¯è¦å¤§èƒ†ä¸€äº›</p>
<pre><code>    #include&lt;iostream&gt;
    #include&lt;cstdio&gt;
    #include&lt;algorithm&gt;
    #include&lt;string&gt;
    #include&lt;cstring&gt;
    #include&lt;cmath&gt;
    #include&lt;queue&gt;
    #include&lt;map&gt;
    using namespace std;
    const int N = 50 + 10;
    const int inf = 0x3f3f3f3f;
    int n, m;
    int fa[N*N];
    int a[N][N];
    int get(int x)
    {
    	if (x == fa[x])  return x;
    	return fa[x] = get(fa[x]);
    }
    struct E
    {
    	int u, v, w;
    	bool operator&lt;(const E &amp;other){
    		return w &lt; other.w;
    	}
    }edge[N*N*N*N];
    int tot,cas;
    int d[N][N];
    const int dx[4] = { 0, 0, -1, 1 }, dy[4] = { 1, -1, 0, 0 };
    typedef pair&lt;int, int &gt; P;
    void bfs(int x,int y)
    {
    	memset(d, -1, sizeof(d));
    	d[x][y] =0;
    	queue&lt;P&gt; q;
    	q.push(P(x, y));
    	int cnt = 1;
    	while (!q.empty())
    	{
    		P cur = q.front();
    		q.pop();
    		for (int i = 0; i &lt; 4; i++)
    		{
    			int nx = cur.first+ dx[i], ny = cur.second + dy[i];
    			if (nx &gt;= 1 &amp;&amp; nx &lt;= n&amp;&amp;ny &gt;= 1 &amp;&amp; ny &lt;= m&amp;&amp;d[nx][ny] == -1&amp;&amp;a[nx][ny]&gt;=0)
    			{
    				d[nx][ny] = d[cur.first][cur.second] + 1;
    				q.push(P(nx, ny));
    				if (a[nx][ny]&gt;0)
    				{
    					edge[tot].u = a[x][y];
    					edge[tot].v = a[nx][ny];
    					edge[tot].w = d[nx][ny];
    					tot++;
    					cnt++;
    					if (cnt &gt;= cas) return;
    				}
    			}
    		}
    	}
    }
    void kru()
    {
    	sort(edge, edge + tot);
    	for (int i = 1; i &lt;= cas; i++)
    		fa[i] = i;
    	int ans = 0;
    	int k = 0;
    	for (int i = 0; i &lt; tot; i++)
    	{
    		int u = edge[i].u, v = edge[i].v;
    		if (get(u) != get(v))
    		{
    			fa[get(u)] = get(v);
    			ans += edge[i].w;
    		}
    	}
    	cout &lt;&lt; ans &lt;&lt; endl;
    
    }
    int main()
    {
    	int t;
    	cin &gt;&gt; t;
    	while (t--)
    	{
    		tot = 0;
    		cas = 0;
    		cin &gt;&gt; m &gt;&gt; n;
    		char s[N];
    		gets(s);
    		for (int i = 1; i &lt;= n; i++)
    		{
    			for (int j = 1; j&lt;= m; j++)
    			{
    				char c = getchar();
    				if (c == ' ') a[i][j] = 0;
    				else if (c == '#') a[i][j] = -1;
    				else a[i][j] = ++cas;
    			}
    			getchar();
    		}
    		for (int i = 1; i &lt;= n; i++)
    		{
    			for (int j = 1; j &lt;= m; j++)
    			{
    				if (a[i][j] &gt; 0)
    					bfs(i, j);
    			}
    		}
    		kru();
    	}
    	return 0;
    }
</code></pre>
<p>[========]</p>
<blockquote>
<p><strong>D - 0 or 1   <a href="http://acm.hdu.edu.cn/showproblem.php?pid=4370">HDU - 4370</a></strong></p>
</blockquote>
<p>æ¯”èµ›çš„æ—¶å€™ä¸ä¼šï¼Œèµ›åçœ‹é¢˜è§£ä¹Ÿæ˜¯æŒºæ‡µçš„ã€‚
è¿™é¢˜æŠŠCçŸ©é˜µçœ‹æˆé‚»æ¥è¡¨ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>  è¡¨ç¤º iåˆ°jä¹‹é—´çš„è·ç¦»ï¼ŒæŠŠ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">X_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> çœ‹æˆ iåˆ°jä¹‹é—´çš„å…³ç³»ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">X_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> ä¸º1åˆ™è¡¨ç¤ºiå’Œjä¹‹é—´æœ‰ä¸€æ¡è·¯ï¼Œå¹¶ä¸”æƒå€¼ä¸º <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>
è¿™æ ·æˆ‘ä»¬æ±‚ä»1åˆ°nçš„æœ€çŸ­è·¯å°±å¯ä»¥å¾—åˆ°  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âˆ‘</mo><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow><mo>âˆ—</mo><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></mrow><annotation encoding="application/x-tex">\sum C{ij} * X{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span></span> ï¼Œ ä¸ºä»€ä¹ˆè¿™æ ·æ˜¯æ­£ç¡®çš„å‘¢ï¼Ÿ
æˆ‘ä»¬æŠŠæ¯è¡Œæ¯åˆ—(é‚»æ¥è¡¨) çœ‹æˆæ˜¯å›¾çš„ä¸€ä¸ªé¡¶ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ç¬¬ä¸€è¡Œçš„å‡ºåº¦å°±æ˜¯1ï¼Œæœ€åä¸€åˆ—çš„å…¥åº¦æ˜¯1ï¼Œå…¶ä»–ç‚¹çš„å‡ºåº¦å’Œå…¥åº¦å‡ä¸º1</p>
<ul>
<li>è¡¨ç¤ºç‚¹ 1 çš„å‡ºåº¦ä¸º 1</li>
<li>è¡¨ç¤ºç‚¹ n çš„å…¥åº¦ä¸º 1</li>
<li>é™¤äº†ç‚¹ 1 å’Œç‚¹ n å¤–çš„å…¶ä»–ç‚¹å‡ºå…¥åº¦ç›¸ç­‰</li>
</ul>
<p>å¯ä»¥ç”»ä¸€ä¸‹ï¼Œå‘ç°ä»ä¸€ä¸ªç‚¹uåˆ°å¦ä¸€ä¸ªç‚¹vå°±æ˜¯é‚»æ¥è¡¨ <code>C[u][v]</code> ,è¿™æ ·ä¼šä½¿ç¬¬Våˆ—å¤šä¸€ä¸ª1ï¼Œç„¶åæˆ‘ä»¬ä¸‹æ¬¡å†ä»ç¬¬Vè¡Œå‡ºå‘åœ¨æ‰¾ä¸‹ä¸€ä¸ªç‚¹ï¼Œè¿™æ ·ç¬¬Vè¡Œä¹Ÿå°±å¤šä¸€ä¸ª1ï¼Œè¿™æ ·å°±æ»¡è¶³äº†é¢˜ç›®è¦æ±‚çš„å…³ç³»ã€‚
ç„¶åè¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯å¯ä»¥ä»ç‚¹ 1 å‡ºå‘åˆ°è¾¾å…¶ä»–ç‚¹ç„¶ååˆå›åˆ°ç‚¹ 1 å½¢æˆä¸€ä¸ªç¯ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ä»ç‚¹ n å‡ºå‘å›åˆ°ç‚¹ nã€‚è¿™æ ·ä¹Ÿæ˜¯ç¬¦åˆæ¡ä»¶çš„ï¼Œç­”æ¡ˆä¸ºä» 1 å‡ºå‘çš„æœ€å°æƒå€¼ç¯å’Œä» n å‡ºå‘çš„æœ€å°æƒå€¼ç¯ä¹‹å’Œã€‚
æœ€åæ¯”è¾ƒä¸¤ç§æƒ…å†µçš„æœ€å°å€¼
æ±‚ç¯ï¼Œæ³¨æ„æœ€å¼€å§‹ä¸æ˜¯å°†èµ·ç‚¹ s å…¥é˜Ÿï¼Œè€Œæ˜¯æŠŠä¸èµ·ç‚¹ç›¸è¿çš„ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼Œå°† <code>dis[s]</code> è®¾ä¸º <code>inf</code> è¿™æ ·å¯ä»¥æ±‚å¾—ä» s å‡ºå‘å›åˆ° s çš„æœ€å°ç¯ï¼Œå…·ä½“å‚è€ƒä»£ç ã€‚</p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
#include&lt;queue&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
using namespace std;
const int N = 310;
const int inf = 0x3f3f3f3f;
int dis[N];
bool vis[N];
int a[N][N],n;
void spfa(int st)
{
	queue&lt;int&gt; q;
	memset(vis, false, sizeof(vis));
	memset(dis, inf, sizeof(dis));
	for (int i = 1; i &lt;= n; i++)
	{
		if (i == st)
		{
			dis[i] = inf;
		}
		else
		{
			q.push(i);
			vis[1] = true;
			dis[i] = c[st][i];
		}
	}
	while (!q.empty())
	{
		int u = q.front();
		q.pop();
		vis[u] = false;
		for (int v = 1; v &lt;= n; v++)
		{
			if (dis[v] &gt; dis[u] + c[u][v])
			{
				dis[v] = dis[u] +c[u][v];
				if (!vis[v])
				{
					vis[v] = true;
					q.push(v);
				}
			}

		}


	}
}
int main()
{
	while (scanf(&quot;%d&quot;, &amp;n)!=EOF)
	{
		
		for (int i = 1; i &lt;= n; i++)
		{
			for (int j = 1; j &lt;= n; j++)
				scanf(&quot;%d&quot;, &amp;c[i][j]);
		}
		spfa(1);
		int c1 = dis[1], ans = dis[n];
		spfa(n);
		int c2 = dis[n];
		ans = min(ans, c1 + c2);
		cout &lt;&lt; ans &lt;&lt; endl;

	}
	return 0;
}
</code></pre>
<hr>
<blockquote>
<p><strong>E - Extended Traffic <a href="https://vjudge.net/problem/LightOJ-1074">LightOJ - 1074</a></strong></p>
</blockquote>
<p>spfaåˆ¤è´Ÿç¯ï¼ŒæŠŠè´Ÿç¯ä¸Šçš„ç‚¹æ ‡è®°ä¸€ä¸‹ï¼Œä¸è¦æƒ³å½“ç„¶çš„è®¤ä¸ºæœ‰è´Ÿç¯æ‰€æœ‰ç‚¹éƒ½è¦è¢«æ ‡è®°ï¼Œè´Ÿç¯åªæ˜¯æ‰€æœ‰ç‚¹å½¢æˆçš„å›¾çš„ä¸€éƒ¨åˆ†ï¼Œè¿˜æœ‰å°±æ˜¯ä¸è¦å¿˜äº†in[v]++,èµ›åœºä¸Šè¿™ä¸ªåœ°æ–¹æ²¡å†™è¶…æ—¶äº†ï¼Œä¹Ÿæ²¡æ¥å¾—åŠå‘ç°</p>
<pre><code>#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;ctime&gt;
#include &lt;cmath&gt;
#include &lt;queue&gt;
#include &lt;stack&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;sstream&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
using namespace std;
const int M = 2e5 + 10;
const int N = 2e2 + 10;
const int inf = 0x3f3f3f3f;
struct E{
	int to, next, w;
}edge[M];
int head1[N], tot;
int dis1[N], in[N];
bool vis[N], vis1[N];
int n, m, cas;
int a[N];
void addedge(int from, int to, int w)
{
	edge[++tot].to = to;
	edge[tot].w = w;
	edge[tot].next = head1[from];
	head1[from] = tot;
}
void dfs(int u)
{
	vis1[u] = true;
	for (int i = head1[u]; i != -1; i = edge[i].next)
	{
		if (!vis1[edge[i].to])
			dfs(edge[i].to);
	}
}
bool spfa1()
{
	int h = 0, t = 0;
	queue&lt;int&gt; q;
	memset(dis1, inf, sizeof(dis1));
	memset(vis, false, sizeof(vis));
	memset(vis1, false, sizeof(vis1));
	memset(in, 0, sizeof(in));
	dis1[1] = 0;
	q.push(1);
	in[1]++;
	vis[1] = true;
	while (!q.empty())
	{
		int u = q.front();
		q.pop();
		vis[u] = false;
		if (vis1[u]) continue;
		for (int i = head1[u]; i != -1; i = edge[i].next)
		{
			int v = edge[i].to;
			
			int w = edge[i].w;
			if (dis1[v]&gt; dis1[u] + w)
			{
				dis1[v] = dis1[u] + w;
				if (!vis[v])
				{
					vis[v] = true;
					q.push(v);
					in[v]++;
					if (in[v] &gt; n) vis1[v]=true;
				}
			}
		}
	}
	return true;
}

int main()
{
	int t;
	cin &gt;&gt; t;
	while (t--)
	{
		tot = 0;
		scanf(&quot;%d&quot;, &amp;n);
		for (int i = 1; i &lt;= n; i++)
		{
			scanf(&quot;%d&quot;, &amp;a[i]);
			head1[i] = -1;
		}
		cin &gt;&gt; m;
		while (m--)
		{
			int u, v;
			scanf(&quot;%d%d&quot;, &amp;u, &amp;v);
			int w = (a[v] - a[u])*(a[v] - a[u])*(a[v] - a[u]);
			addedge(u, v, w);
		}
		bool f=spfa1();
		printf(&quot;Case %d:\n&quot;, ++cas);
		int q;
		scanf(&quot;%d&quot;, &amp;q);
		while (q--)
		{
			int vv;
			scanf(&quot;%d&quot;, &amp;vv);
			if (vis1[vv] || dis1[vv] == inf || dis1[vv] &lt; 3)
			{
				puts(&quot;?&quot;);
			}
			else
			{
				printf(&quot;%d\n&quot;, dis1[vv]);
			}


		}
	}


	return 0;
}
</code></pre>
<hr>
<blockquote>
<p><strong>F - The Unique MST <a href="http://poj.org/problem?id=1679">POJ - 1679</a></strong></p>
</blockquote>
<p>è¿™é¢˜åˆ¤æ–­æœ€å°ç”Ÿæˆæ ‘æ˜¯å¦å”¯ä¸€ï¼Œç”¨kruskal åŠ è¾¹çš„æ—¶å€™å¦‚æœä¸¤ä¸ªé¡¶ç‚¹åœ¨ä¸€ä¸ªé›†åˆä¸­äº†ï¼Œåˆ¤æ–­å·²åŠ å…¥çš„é¡¶ç‚¹é›†åˆä¸­æ˜¯å¦å­˜åœ¨å’Œå½“å‰è¾¹æƒå€¼ç›¸åŒçš„è¾¹ï¼Œæœ‰å°±æ˜¯ä¸å”¯ä¸€ã€‚å¯ä»¥æŠŠåŠ å…¥é›†åˆä¸­çš„ç‚¹å»ºä¸€é¢—æ ‘ï¼Œç„¶åæœç´¢è¿›è¡Œåˆ¤æ–­ã€‚</p>
<pre><code>#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
#include&lt;string&gt;
#include&lt;cstring&gt;
#include&lt;cmath&gt;
#include&lt;queue&gt;
#include&lt;map&gt;
using namespace std;
const int N = 1e3 + 10;
const int inf = 0x3f3f3f3f;
int n, m;
int fa[N];
int get(int x)
{
	if (x == fa[x])  return x;
	return fa[x] = get(fa[x]);
}
struct E
{
	int u, v, w;
	bool operator&lt;(const E &amp;other){
		return w &lt; other.w;
	}
}edge[N*N];
int tot;
int a[N];
typedef pair&lt;int, int&gt; P;
vector&lt;P&gt; g[N];
bool dfs(int v, int u,int pre, int c,bool f)
{
	for (int i = 0; i &lt; g[v].size(); i++)
	{
		if (g[v][i].first == pre) continue;
		if (g[v][i].second == c)  f = true;
		if (f&amp;&amp;g[v][i].first == u) return true;
		if	(dfs(g[v][i].first, u, v, c, f)) return true;
	}
	return false;
}
int main()
{
	int t;
	cin &gt;&gt; t;
	while (t--)
	{
		cin &gt;&gt; n;
		for (int i = 1; i &lt;= n; i++)
			g[i].clear();
		cin &gt;&gt; m;
		tot = 0;
		bool f = true;
		while (m--)
		{
			int i, j, w;
			cin &gt;&gt; i &gt;&gt; j &gt;&gt; w;
			edge[tot].w = w;
			edge[tot].u = i;
			edge[tot].v = j;
			tot++;
		}
		sort(edge, edge + tot);
		for (int i = 1; i &lt;= n; i++)
			fa[i] = i;
		int ans = 0;
		int k = 0;
		for (int i = 0; i &lt; tot; i++)
		{
			if (k &gt;= n - 1) break;
			int u = edge[i].u, v = edge[i].v;
			if (get(u) != get(v))
			{
				g[u].push_back(P(v, edge[i].w));
				g[v].push_back(P(u, edge[i].w));
				fa[get(u)] = get(v);
				ans += edge[i].w;
			}
			else
			{
				
				if (dfs(u, v, -1, edge[i].w, false)) {
					f = false;
					break;
				}
				
			}
		}
		if (f)
			printf(&quot;%d\n&quot;, ans);
		else
			printf(&quot;Not Unique!\n&quot;);
	}
	return 0;
}
</code></pre>
<blockquote>
<p>æ€»ç»“:æ¯”èµ›çš„æ—¶å€™ä¸€å®šè¦ç»†å¿ƒï¼Œæœ‰æ€è·¯çš„æ—¶å€™è¦å°è¯•å»å®ç°å®ƒï¼ï¼ï¼å¤šåˆ·é¢˜ã€‚</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[POJ 3662 Telephone Lines]]></title>
        <id>https://www.akwing.cn/post/poj-3662-telephone-lines</id>
        <link href="https://www.akwing.cn/post/poj-3662-telephone-lines">
        </link>
        <updated>2019-06-19T12:35:40.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="dpäºŒåˆ†-æœ€çŸ­è·¯">DP/äºŒåˆ† + æœ€çŸ­è·¯</h2>
]]></summary>
        <content type="html"><![CDATA[<h2 id="dpäºŒåˆ†-æœ€çŸ­è·¯">DP/äºŒåˆ† + æœ€çŸ­è·¯</h2>
<!-- more -->
<blockquote>
<p>æ–¹æ³•1 DP</p>
</blockquote>
<p><strong><code>ç”¨d[x][y]è¡¨ç¤ºä»1å·èŠ‚ç‚¹åˆ°è¾¾xå·èŠ‚ç‚¹,é€”ä¸­ç»è¿‡äº†yæ¡å…è´¹ç”µç¼†æ—¶,ç»è¿‡çš„è·¯ä¸Šæœ€è´µçš„ç”µç¼†èŠ±è´¹æœ€å°æ˜¯å¤šå°‘.</code></strong>
å‡è®¾æœ‰ä¸€æ¡è¾¹ä» <code>x</code> åˆ° <code>v</code> ï¼Œæƒå€¼ä¸º <code>w</code> ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥ï¼š</p>
<ul>
<li>ç”¨ <code>max(dp[x][y],w)</code> æ›´æ–° <code>dp[v][y]</code> ,è¿™ä¸ªè¡¨ç¤ºä¸åœ¨ç”µç¼† <code>x-v</code> ä½¿ç”¨å…è´¹æœåŠ¡ã€‚</li>
<li>ç”¨ <code>dp[x][y]</code> æ›´æ–° <code>dp[v][p+1]</code> ,è¡¨ç¤ºåœ¨ç”µç¼† <code>x-v</code> ä¸Šä½¿ç”¨å…è´¹æœåŠ¡</li>
</ul>
<p>ç”±äºè¿™ä¸ªdpæœ‰åæ•ˆæ€§ï¼Œä¸èƒ½ç”¨dijï¼Œé‡‡ç”¨spfaä¸æ–­è¿­ä»£æ›´æ–°ã€‚</p>
<pre><code>#include &lt;bits/stdc++.h&gt;//ç¼©çŸ­ä»£ç ç”¨äº†ä¸‡èƒ½å¤´ï¼Œpojä¸å…è®¸è¿™æ ·
using namespace std;
const int N = 1e3 + 10;
const int inf = 0x3f3f3f3f;
int n, pp, k;
struct E{
	int to, next, w;
}edge[20 * N];
int tot;
int head[N];
bool vis[N][N];
int dp[N][N];
void addedge(int from, int to, int w)
{
	edge[++tot].to = to;
	edge[tot].w = w;
	edge[tot].next = head[from];
	head[from] = tot;
}
typedef pair&lt;int, int&gt; P;
queue&lt;P&gt; q;
void spfa()
{
	memset(dp, inf, sizeof(dp));
	dp[1][0] = 0;
	vis[1][0] = true;
	q.push(P(1, 0));
	while (!q.empty())
	{
		P u = q.front();
		q.pop();
		int x = u.first, p = u.second;
		vis[x][p] = false;
		for (int i = head[x]; i != -1; i = edge[i].next)
		{
			int v = edge[i].to, w = edge[i].w;
			if (dp[v][p]&gt;max(dp[x][p], w))
			{
				dp[v][p] = max(dp[x][p], w);
				if (!vis[v][p])
				{
					vis[v][p] = true;
					q.push(P(v, p));
				}
			}
			if (p&lt;k&amp;&amp;dp[v][p + 1]&gt;dp[x][p])
			{
				dp[v][p + 1] = dp[x][p];
				if (!vis[v][p + 1])
				{
					vis[v][p + 1] = true;
					q.push(P(v, p + 1));
				}
			}
		}
	}

}
int main()
{
	scanf(&quot;%d%d%d&quot;, &amp;n, &amp;pp, &amp;k);
	memset(head, -1, sizeof(head));
	while (pp--)
	{
		int u, v, w;
		scanf(&quot;%d%d%d&quot;, &amp;u, &amp;v, &amp;w);
		addedge(u, v, w);
		addedge(v, u, w);
	}
	spfa();
	int ans = inf;
	for (int i = 0; i &lt;= k; i++)
	{
		ans = min(ans, dp[n][i]);
	}
	printf(&quot;%d\n&quot;, ans == inf ? -1 : ans);
	return 0;
}
</code></pre>
<blockquote>
<p>æ–¹æ³•2 äºŒåˆ†</p>
</blockquote>
<p>æ˜¾ç„¶ç­”æ¡ˆå…·æœ‰å•è°ƒæ€§ã€‚äºŒåˆ†ç­”æ¡ˆï¼Œå‡è®¾ç­”æ¡ˆä¸ºmidï¼Œæˆ‘ä»¬å°†è¾¹æƒå¤§äºç­‰äºmidçš„è¾¹çš„è¾¹æƒè®¾ä¸º1ï¼Œè¡¨ç¤ºå…è´¹æœåŠ¡çš„è¾¹ï¼Œå³å¯ä»¥ç†è§£ä¸ºä½¿ç”¨äº†ä¸€æ¬¡å…è´¹æœåŠ¡ã€‚å°äºmidçš„è¾¹æƒè®¾ä¸º0ï¼Œè¡¨ç¤ºä¸å…è´¹ï¼Œæ²¡æœ‰ä½¿ç”¨å…è´¹æœåŠ¡ã€‚ç„¶åæˆ‘ä»¬è·‘ä¸€ä¾¿æœ€çŸ­è·¯ï¼Œçœ‹æœ€çŸ­è·¯å¾„æ˜¯å¦å°äºç­‰äºKï¼Œå°äºç­‰äºåˆ™midæ˜¯æ»¡è¶³çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç¼©å°mid,ç»§ç»­äºŒåˆ†ç­”æ¡ˆã€‚</p>
<pre><code>#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;ctime&gt;
#include &lt;cmath&gt;
#include &lt;queue&gt;
#include &lt;stack&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;sstream&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
using namespace std;
const int N = 1e3 + 10;
const int inf = 0x3f3f3f3f;
int n, pp, k;
struct E{
	int to, next, w;
}edge[20 * N];
int tot;
int head[N];
bool vis[N];
int dis[N];
void addedge(int from, int to, int w)
{
	edge[++tot].to = to;
	edge[tot].w = w;
	edge[tot].next = head[from];
	head[from] = tot;
}
typedef pair&lt;int, int&gt; P;
queue&lt;int&gt; q;
int spfa(int mid)
{
	while (!q.empty()) q.pop();
	memset(vis, false, sizeof(vis));
	memset(dis, inf, sizeof(dis));
	dis[1] = 0;
	vis[1] = true;
	q.push(1);
	while (!q.empty())
	{
		int u = q.front();
		q.pop();
		vis[u] = false;
		for (int i = head[u]; i != -1; i = edge[i].next)
		{
			int v = edge[i].to;
			int w = (edge[i].w &gt;= mid);
			if (dis[v] &gt; dis[u]+ w)
			{
				dis[v] = dis[u] + w;
				if (!vis[v])
				{
					vis[v]= true;
					q.push(v);
				}
			}
		}
	}
	return dis[n] &lt;= k;
}
int main()
{
	scanf(&quot;%d%d%d&quot;, &amp;n, &amp;pp, &amp;k);
	memset(head, -1, sizeof(head));
	int l = 0;
	while (pp--)
	{
		int u, v, w;
		scanf(&quot;%d%d%d&quot;, &amp;u, &amp;v, &amp;w);
		addedge(u, v, w);
		addedge(v, u, w);
	}
	int r = 1e7;
	while (l &lt; r)
	{
		int mid = (l+r+1) &gt;&gt; 1;
		if (!spfa(mid)) l = mid;
		else r = mid - 1;
	}
	printf(&quot;%d\n&quot;, l &gt;=1e7 ? -1 : l);
	return 0;
}
</code></pre>
]]></content>
    </entry>
</feed>